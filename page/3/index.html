<!DOCTYPE html>



  


<html class="theme-next muse use-motion" lang="zh-CN">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.2" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Hexo, NexT" />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.2" />






<meta name="description" content="以后将会在此发布一些生活的、技术的、学业的各种分享在这里，以期记录我的点点滴滴">
<meta name="keywords" content="随性、随心">
<meta property="og:type" content="website">
<meta property="og:title" content="昊江的博客">
<meta property="og:url" content="https://haojohnsonlee.github.io/page/3/index.html">
<meta property="og:site_name" content="昊江的博客">
<meta property="og:description" content="以后将会在此发布一些生活的、技术的、学业的各种分享在这里，以期记录我的点点滴滴">
<meta property="og:locale" content="zh-CN">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="昊江的博客">
<meta name="twitter:description" content="以后将会在此发布一些生活的、技术的、学业的各种分享在这里，以期记录我的点点滴滴">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    sidebar: {"position":"left","display":"post","offset":12,"offset_float":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="https://haojohnsonlee.github.io/page/3/"/>





  <title>昊江的博客</title>
  




<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
          m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-119891946-1', 'auto');
  ga('send', 'pageview');
</script>











</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-CN">

  
  
    
  

  <div class="container sidebar-position-left 
   page-home 
 ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta custom-logo">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">昊江的博客</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">以后将会在此发布一些生活的、技术的、学业的各种分享在这里，以期记录我的点点滴滴</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            About
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            Archives
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            Tags
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://haojohnsonlee.github.io/2018/06/03/算法-二叉树/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Johnson Lee">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="昊江的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/06/03/算法-二叉树/" itemprop="url">算法-二叉树.1</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-06-03T12:17:18+08:00">
                2018-06-03
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Words count in article</span>
                
                <span title="Words count in article">
                  523
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Reading time</span>
                
                <span title="Reading time">
                  2 mins
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="二叉树"><a href="#二叉树" class="headerlink" title="二叉树"></a>二叉树</h3><p>树结构存在是为了平衡CRUD操作效率的一种半线性结构的数据结构(与图、向量相比)。而二叉树是树的一种特例，有趣的是，在一般条件下，可证明二叉树可等效代替所有的树结构，所以树结构用二叉树实现来代替。</p>
<h3 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h3><p>树结构同样由一个个的节点构成，节点保存三个父子指针连接。</p>
<h4 id="BinaryTree-h"><a href="#BinaryTree-h" class="headerlink" title="BinaryTree.h"></a>BinaryTree.h</h4><p>定义了二叉树节点的结构以及基本操作<br><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">pragma</span> once</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> BinNodePosi(T) BinNode<span class="meta-string">&lt;T&gt;* //节点位置</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> stature(p) ((p) ? (p)-&gt;height : -1) <span class="comment">//节点高度（与“空树高度为-1”的约定相统一）</span></span></span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">enum</span> &#123; RB_RED, RB_BLACK&#125; RBColor; <span class="comment">//节点颜色</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt; <span class="class"><span class="keyword">struct</span> <span class="title">BinNode</span> &#123;</span> <span class="comment">//二叉树节点模板类</span></span><br><span class="line"><span class="comment">// 成员</span></span><br><span class="line">   T data; <span class="comment">//数值</span></span><br><span class="line">   BinNodePosi(T) parent; BinNodePosi(T) lc; BinNodePosi(T) rc; <span class="comment">//父节点及左、右孩子</span></span><br><span class="line">   <span class="keyword">int</span> height; <span class="comment">//高度（通用）</span></span><br><span class="line">   <span class="keyword">int</span> npl; <span class="comment">//Null Path Length（左式堆，也可直接用height代替）</span></span><br><span class="line">   RBColor color; <span class="comment">//颜色（红黑树）</span></span><br><span class="line"><span class="comment">// 构造函数</span></span><br><span class="line">   BinNode() :</span><br><span class="line">      parent ( <span class="literal">NULL</span> ), lc ( <span class="literal">NULL</span> ), rc ( <span class="literal">NULL</span> ), height ( <span class="number">0</span> ), npl ( <span class="number">1</span> ), color ( RB_RED ) &#123; &#125;</span><br><span class="line">   BinNode ( T e, BinNodePosi(T) p = <span class="literal">NULL</span>, BinNodePosi(T) lc = <span class="literal">NULL</span>, BinNodePosi(T) rc = <span class="literal">NULL</span>,</span><br><span class="line">             <span class="keyword">int</span> h = <span class="number">0</span>, <span class="keyword">int</span> l = <span class="number">1</span>, RBColor c = RB_RED ) :</span><br><span class="line">      data ( e ), parent ( p ), lc ( lc ), rc ( rc ), height ( h ), npl ( l ), color ( c ) &#123; &#125;</span><br><span class="line"><span class="comment">// 操作接口</span></span><br><span class="line">   <span class="function"><span class="keyword">int</span> <span class="title">size</span><span class="params">()</span></span>; <span class="comment">//统计当前节点后代总数，亦即以其为根的子树的规模</span></span><br><span class="line">   BinNodePosi(T) insertAsLC ( T <span class="keyword">const</span>&amp; ); <span class="comment">//作为当前节点的左孩子插入新节点</span></span><br><span class="line">   BinNodePosi(T) insertAsRC ( T <span class="keyword">const</span>&amp; ); <span class="comment">//作为当前节点的右孩子插入新节点</span></span><br><span class="line">   BinNodePosi(T) succ(); <span class="comment">//取当前节点的直接后继</span></span><br><span class="line">   <span class="keyword">template</span> &lt;<span class="keyword">typename</span> VST&gt; <span class="function"><span class="keyword">void</span> <span class="title">travLevel</span> <span class="params">( VST&amp; )</span></span>; <span class="comment">//子树层次遍历</span></span><br><span class="line">   <span class="keyword">template</span> &lt;<span class="keyword">typename</span> VST&gt; <span class="function"><span class="keyword">void</span> <span class="title">travPre</span> <span class="params">( VST&amp; )</span></span>; <span class="comment">//子树先序遍历</span></span><br><span class="line">   <span class="keyword">template</span> &lt;<span class="keyword">typename</span> VST&gt; <span class="function"><span class="keyword">void</span> <span class="title">travIn</span> <span class="params">( VST&amp; )</span></span>; <span class="comment">//子树中序遍历</span></span><br><span class="line">   <span class="keyword">template</span> &lt;<span class="keyword">typename</span> VST&gt; <span class="function"><span class="keyword">void</span> <span class="title">travPost</span> <span class="params">( VST&amp; )</span></span>; <span class="comment">//子树后序遍历</span></span><br><span class="line"><span class="comment">// 比较器、判等器</span></span><br><span class="line">   <span class="keyword">bool</span> <span class="keyword">operator</span>&lt; ( BinNode <span class="keyword">const</span>&amp; bn ) &#123; <span class="keyword">return</span> data &lt; bn.data; &#125; <span class="comment">//小于</span></span><br><span class="line">   <span class="keyword">bool</span> <span class="keyword">operator</span>== ( BinNode <span class="keyword">const</span>&amp; bn ) &#123; <span class="keyword">return</span> data == bn.data; &#125; <span class="comment">//等于</span></span><br><span class="line">   <span class="keyword">bool</span> <span class="keyword">operator</span>&gt; (BinNode <span class="keyword">const</span>&amp; bn)&#123; <span class="keyword">return</span> data &gt; bn.data;&#125; <span class="comment">//大于 </span></span><br><span class="line">   <span class="comment">/*DSA*/</span></span><br><span class="line">   <span class="comment">/*DSA*/</span>BinNodePosi(T) zig(); <span class="comment">//顺时针旋转</span></span><br><span class="line">   <span class="comment">/*DSA*/</span>BinNodePosi(T) zag(); <span class="comment">//逆时针旋转</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://haojohnsonlee.github.io/2018/06/01/算法-向量2/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Johnson Lee">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="昊江的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/06/01/算法-向量2/" itemprop="url">算法-向量-2</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-06-01T08:55:07+08:00">
                2018-06-01
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Words count in article</span>
                
                <span title="Words count in article">
                  1,399
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Reading time</span>
                
                <span title="Reading time">
                  8 mins
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h4 id="向量"><a href="#向量" class="headerlink" title="向量"></a>向量</h4><p>基于上次的基础，添加排序操作，便于实现有序向量进而执行二分查找等操作。</p>
<h4 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h4><h5 id="Vector-h"><a href="#Vector-h" class="headerlink" title="Vector.h"></a>Vector.h</h5><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">pragma</span> once</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;assert.h&gt;</span></span></span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">int</span> Rank;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> DEFAULT_CAPACITY 10 <span class="comment">// 初始向量容量</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Increase</span> &#123;</span> <span class="comment">//这是一个visit对象实例</span></span><br><span class="line">	<span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">operator</span><span class="params">()</span><span class="params">(T &amp; e)</span> </span>&#123; e++; &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">enum</span> SortMethod</span><br><span class="line">&#123;</span><br><span class="line">	bubbleSort,</span><br><span class="line">	selectionSort,</span><br><span class="line">	mergeSort,</span><br><span class="line">	heapSort,</span><br><span class="line">	quickSort</span><br><span class="line">	</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt; <span class="class"><span class="keyword">class</span> <span class="title">Vector</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">	Rank _size;</span><br><span class="line">	T* _items;</span><br><span class="line">	<span class="keyword">int</span> _capacity;</span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">copyFrom</span><span class="params">(T* items, <span class="keyword">int</span> lo, <span class="keyword">int</span> hi)</span></span>;</span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">expand</span><span class="params">()</span></span>;</span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">shrink</span><span class="params">()</span></span>;</span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">swap</span><span class="params">(Rank r1, Rank r2)</span></span>;</span><br><span class="line">	<span class="comment">// 低效版本</span></span><br><span class="line">	<span class="keyword">void</span> _bubbleSort_1(Rank lo, Rank hi);</span><br><span class="line"></span><br><span class="line">	<span class="keyword">void</span> _mergeSort(Rank lo, Rank hi);</span><br><span class="line">	<span class="keyword">void</span> _merge(Rank lo, Rank mi, Rank hi);</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	Vector(<span class="keyword">int</span> c = DEFAULT_CAPACITY);</span><br><span class="line">	Vector(T* items, <span class="keyword">int</span> lo, <span class="keyword">int</span> hi);</span><br><span class="line">	<span class="keyword">virtual</span> ~Vector();</span><br><span class="line"></span><br><span class="line">	<span class="comment">//只读接口</span></span><br><span class="line">	<span class="function"><span class="keyword">int</span> <span class="title">size</span><span class="params">()</span> <span class="keyword">const</span></span>;</span><br><span class="line">	<span class="function"><span class="keyword">int</span> <span class="title">get</span><span class="params">(Rank rank)</span></span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	<span class="comment">//可写接口</span></span><br><span class="line">	T &amp; <span class="keyword">operator</span>[] (Rank rank) <span class="keyword">const</span>;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">put</span><span class="params">(Rank rank, T e)</span></span>;</span><br><span class="line">	<span class="comment">//判断是否为空</span></span><br><span class="line">	<span class="function"><span class="keyword">bool</span> <span class="title">empty</span><span class="params">()</span> <span class="keyword">const</span></span>;</span><br><span class="line">	<span class="comment">//插入操作</span></span><br><span class="line">	<span class="function">Rank <span class="title">insert</span><span class="params">(Rank r, <span class="keyword">const</span> T&amp; e)</span></span>;</span><br><span class="line">	<span class="comment">//删除 位于lo 与 hi区间的元素 返回删除个数</span></span><br><span class="line">	<span class="function"><span class="keyword">int</span> <span class="title">remove</span><span class="params">(Rank lo, Rank hi)</span></span>;</span><br><span class="line">	<span class="comment">//删除 位于r 的元素 返回删除个数</span></span><br><span class="line">	<span class="function"><span class="keyword">int</span> <span class="title">remove</span><span class="params">(Rank r)</span></span>;</span><br><span class="line">	<span class="comment">//区间内查找</span></span><br><span class="line">	<span class="function">Rank <span class="title">find</span><span class="params">(<span class="keyword">const</span> T&amp; e, <span class="keyword">int</span> lo, <span class="keyword">int</span> hi)</span></span>;</span><br><span class="line">	<span class="comment">//剔除所有重复元素 O(n^2)</span></span><br><span class="line">	<span class="function"><span class="keyword">int</span> <span class="title">deduplicate</span><span class="params">()</span></span>;</span><br><span class="line">	<span class="comment">//遍历元素</span></span><br><span class="line">	void traverse(void(*visit)(T&amp; e));</span><br><span class="line">	<span class="keyword">template</span> &lt;<span class="keyword">typename</span> VST&gt;  <span class="function"><span class="keyword">void</span> <span class="title">traverse</span><span class="params">(VST&amp; vst)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//排序接口</span></span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">sort</span><span class="params">(SortMethod sort, Rank lo, Rank hi)</span></span>;</span><br><span class="line"></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h5 id="Vector-cpp"><a href="#Vector-cpp" class="headerlink" title="Vector.cpp"></a>Vector.cpp</h5><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"stdafx.h"</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"Vector.h"</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line">Vector&lt;T&gt;::Vector(<span class="keyword">int</span> c)</span><br><span class="line">&#123;</span><br><span class="line">	_items = <span class="keyword">new</span> T[_capacity = c];</span><br><span class="line">	_size = <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line">Vector&lt;T&gt;::Vector(T * items, <span class="keyword">int</span> lo, <span class="keyword">int</span> hi)</span><br><span class="line">&#123;</span><br><span class="line">	copyFrom(items, lo, hi);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line">Vector&lt;T&gt;::~Vector()</span><br><span class="line">&#123;</span><br><span class="line">	<span class="keyword">delete</span>[] _items;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="keyword">int</span> Vector&lt;T&gt;::size() <span class="keyword">const</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="keyword">return</span> _size;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="keyword">int</span> Vector&lt;T&gt;::get(Rank rank)</span><br><span class="line">&#123;</span><br><span class="line">	assert(rank &lt; _size &amp;&amp; rank &gt;= <span class="number">0</span>);</span><br><span class="line">	<span class="keyword">return</span> _items[rank];</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="keyword">void</span> Vector&lt;T&gt;::put(Rank rank, T e)</span><br><span class="line">&#123;</span><br><span class="line">	assert(rank &lt; _size &amp;&amp; rank &gt;= <span class="number">0</span>);</span><br><span class="line">	_items[rank] = e;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="keyword">bool</span> Vector&lt;T&gt;::empty() <span class="keyword">const</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="keyword">return</span> !_size;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line">Rank Vector&lt;T&gt;::insert(Rank r, <span class="keyword">const</span> T&amp; e)</span><br><span class="line">&#123;</span><br><span class="line">	expand();</span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = _size; i &gt; r; i--) </span><br><span class="line">		_items[i] = _items[i - <span class="number">1</span>];</span><br><span class="line">	_items[r] = e; _size++;</span><br><span class="line">	<span class="keyword">return</span> r;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="keyword">int</span> Vector&lt;T&gt;::remove(Rank lo, Rank hi)</span><br><span class="line">&#123;</span><br><span class="line">	<span class="keyword">if</span> (lo == hi) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">while</span> (hi &lt; _size) _items[lo++] = _items[hi++];</span><br><span class="line">	<span class="keyword">int</span> decrease = hi - lo;</span><br><span class="line">	_size = _size - decrease;</span><br><span class="line">	shrink();  <span class="comment">//非必须</span></span><br><span class="line">	<span class="keyword">return</span> decrease;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="keyword">int</span> Vector&lt;T&gt;::remove(Rank r)</span><br><span class="line">&#123;</span><br><span class="line">	<span class="keyword">return</span> remove(r, r + <span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line">Rank Vector&lt;T&gt;::find(<span class="keyword">const</span> T &amp; e, <span class="keyword">int</span> lo, <span class="keyword">int</span> hi)</span><br><span class="line">&#123;</span><br><span class="line">	<span class="keyword">while</span> (lo &lt; hi-- &amp;&amp; e != _items[hi]);</span><br><span class="line">	<span class="keyword">return</span> hi;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="keyword">int</span> Vector&lt;T&gt;::deduplicate()</span><br><span class="line">&#123;</span><br><span class="line">	<span class="keyword">int</span> oldSize = _size;</span><br><span class="line">	<span class="keyword">int</span> i = <span class="number">1</span>;</span><br><span class="line">	<span class="keyword">while</span> (i &lt; _size) &#123;</span><br><span class="line">		find(_items[i], <span class="number">0</span>, i) &lt; <span class="number">0</span> ? i++ : remove(i);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> oldSize - _size;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="keyword">void</span> Vector&lt;T&gt;::traverse(<span class="keyword">void</span>(*visit)(T &amp;e))</span><br><span class="line">&#123;</span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; _size; i++) visit(_items[i]);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="keyword">void</span> Vector&lt;T&gt;::sort(SortMethod sort,Rank lo, Rank hi)</span><br><span class="line">&#123;</span><br><span class="line">	assert(lo &lt; hi &amp;&amp; lo &gt;= <span class="number">0</span> &amp;&amp; hi &lt;= _size);</span><br><span class="line">	<span class="keyword">switch</span> (sort)</span><br><span class="line">	&#123;</span><br><span class="line">	<span class="keyword">case</span> bubbleSort:</span><br><span class="line">		_bubbleSort_1(lo, hi);</span><br><span class="line">		<span class="keyword">break</span>;</span><br><span class="line">	<span class="keyword">case</span> selectionSort:</span><br><span class="line">		<span class="keyword">break</span>;</span><br><span class="line">	<span class="keyword">case</span> mergeSort:</span><br><span class="line">		_mergeSort(lo, hi);</span><br><span class="line">		<span class="keyword">break</span>;</span><br><span class="line">	<span class="keyword">case</span> heapSort:</span><br><span class="line">		<span class="keyword">break</span>;</span><br><span class="line">	<span class="keyword">case</span> quickSort:</span><br><span class="line">		<span class="keyword">break</span>;</span><br><span class="line">	<span class="keyword">default</span>:</span><br><span class="line">		<span class="keyword">break</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> VST&gt;</span><br><span class="line"><span class="keyword">inline</span> <span class="keyword">void</span> Vector&lt;T&gt;::traverse(VST &amp; visit) <span class="comment">//VST 对象进行 "()"操作符重载，执行自定义复杂操作</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; _size; i++) visit(_items[i]);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line">T &amp; Vector&lt;T&gt;::<span class="keyword">operator</span>[](Rank rank) <span class="keyword">const</span></span><br><span class="line">&#123;</span><br><span class="line">	assert(<span class="number">0</span> &lt;= rank &amp;&amp; rank &lt; _size);</span><br><span class="line">	<span class="keyword">return</span> _items[rank];</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="keyword">void</span> Vector&lt;T&gt;::copyFrom(T * items, <span class="keyword">int</span> lo, <span class="keyword">int</span> hi)</span><br><span class="line">&#123;</span><br><span class="line">	assert(lo &lt; hi);</span><br><span class="line">	_items = <span class="keyword">new</span> T[_capacity = (hi - lo) &lt;&lt; <span class="number">1</span>];</span><br><span class="line">	_size = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">while</span> (lo&lt;hi)</span><br><span class="line">		_items[_size++] = items[lo++];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 每次插入前调用该函数</span></span><br><span class="line"><span class="comment"> * 确保不上溢</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="keyword">void</span> Vector&lt;T&gt;::expand()</span><br><span class="line">&#123;</span><br><span class="line">	<span class="keyword">if</span> (_size &lt; _capacity) <span class="keyword">return</span>;  <span class="comment">//不必扩容</span></span><br><span class="line">	<span class="keyword">if</span> (_capacity &lt; DEFAULT_CAPACITY) _capacity = DEFAULT_CAPACITY;   <span class="comment">//至少将最大容量扩展至默认值</span></span><br><span class="line">	<span class="comment">//开辟新数组并复制数组</span></span><br><span class="line">	T* oldElem = _items; _items = <span class="keyword">new</span> T[_capacity &lt;&lt; <span class="number">1</span>];</span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; _size; i++)</span><br><span class="line">		_items[i] = oldElem[i];</span><br><span class="line">	<span class="keyword">delete</span>[] oldElem;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* 每次删除前调用该函数</span></span><br><span class="line"><span class="comment">* 确保不下溢</span></span><br><span class="line"><span class="comment">* 保证一定的空间利用率</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="keyword">void</span> Vector&lt;T&gt;::shrink()</span><br><span class="line">&#123;</span><br><span class="line">	<span class="keyword">if</span> (_capacity &lt; DEFAULT_CAPACITY &lt;&lt; <span class="number">1</span>) <span class="keyword">return</span>; <span class="comment">//不至于最后大小小于默认值</span></span><br><span class="line">	<span class="keyword">if</span> (_size &lt;&lt; <span class="number">2</span> &gt; _capacity)  <span class="keyword">return</span>;</span><br><span class="line">	<span class="comment">// 当元素数量4倍小于最大容量时扩容</span></span><br><span class="line">	T* oldElem = _items; _items = <span class="keyword">new</span> T[_capacity &gt;&gt; <span class="number">1</span>];</span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; _size; i++)</span><br><span class="line">		_items[i] = oldElem[i];</span><br><span class="line">	<span class="keyword">delete</span>[] oldElem;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="keyword">void</span> Vector&lt;T&gt;::swap(Rank r1, Rank r2)</span><br><span class="line">&#123;</span><br><span class="line">	assert(r1 &gt;= <span class="number">0</span> &amp;&amp; r1 &lt;= _size &amp;&amp; r2 &gt;= <span class="number">0</span> &amp;&amp; r2 &lt;= _size);</span><br><span class="line">	_items[r1] = _items[r1] + _items[r2];</span><br><span class="line">	_items[r2] = _items[r1] - _items[r2];</span><br><span class="line">	_items[r1] = _items[r1] - _items[r2];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="keyword">void</span> Vector&lt;T&gt;::_bubbleSort_1(Rank lo, Rank hi)</span><br><span class="line">&#123;</span><br><span class="line">	assert(lo &lt; hi &amp;&amp; lo &gt;= <span class="number">0</span> &amp;&amp; hi &lt;= _size);</span><br><span class="line">	<span class="keyword">bool</span> isSorted = <span class="literal">false</span>;</span><br><span class="line">	<span class="keyword">int</span> _lo;</span><br><span class="line">	<span class="keyword">while</span> (lo&lt; hi)</span><br><span class="line">	&#123;</span><br><span class="line">		_lo = lo;</span><br><span class="line">		isSorted = <span class="literal">true</span>;</span><br><span class="line">		<span class="keyword">while</span> (++_lo &lt; hi) &#123;</span><br><span class="line">			<span class="keyword">if</span> (_items[_lo - <span class="number">1</span>] &gt; _items[_lo]) &#123;</span><br><span class="line">				isSorted = <span class="literal">false</span>;</span><br><span class="line">				swap(_lo - <span class="number">1</span>, _lo);</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		hi--;</span><br><span class="line">		<span class="keyword">if</span> (isSorted) <span class="keyword">break</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="keyword">void</span> Vector&lt;T&gt;::_mergeSort(Rank lo, Rank hi)</span><br><span class="line">&#123;</span><br><span class="line">	<span class="keyword">if</span> (hi - lo &lt; <span class="number">2</span>) <span class="keyword">return</span>; <span class="comment">//到达递归基</span></span><br><span class="line">	<span class="keyword">int</span> mi = (lo + hi) &gt;&gt; <span class="number">1</span>;</span><br><span class="line">	_mergeSort(lo, mi); _mergeSort(mi, hi);</span><br><span class="line">	_merge(lo, mi, hi);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="keyword">void</span> Vector&lt;T&gt;::_merge(Rank lo, Rank mi, Rank hi)</span><br><span class="line">&#123;</span><br><span class="line">	T* A = _items + lo; <span class="comment">// A为_items lo-hi元素</span></span><br><span class="line">	<span class="keyword">int</span> lb = mi - lo; T* B = <span class="keyword">new</span> T[lb]; <span class="comment">//开辟新空间存储 lo - mi 元素</span></span><br><span class="line">	<span class="keyword">for</span> (Rank i = <span class="number">0</span>; i &lt; lb; B[i] = _items[i++]) ; <span class="comment">// 复制元素</span></span><br><span class="line">	<span class="keyword">int</span> lc = hi - mi; T* C = _items + mi; <span class="comment">// C为 mi - hi元素</span></span><br><span class="line">	<span class="keyword">for</span> (Rank i = <span class="number">0</span>, j = <span class="number">0</span>, k = <span class="number">0</span>; (j &lt; lb) || (k &lt; lc)) &#123;</span><br><span class="line">		<span class="keyword">if</span> ((j &lt; lb) &amp;&amp; (!(k &lt; lc) || (B[j] &lt;= C[k])))A[i++] = B[j++];</span><br><span class="line">		<span class="keyword">if</span> ((k &lt; lc) &amp;&amp; (!(j &lt; lb) || (C[k] &lt; B[j]))) A[i++] = C[k++];</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">delete</span>[] B;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">visit</span><span class="params">(<span class="keyword">const</span> T &amp; e)</span> </span>&#123;</span><br><span class="line">	<span class="built_in">std</span>::<span class="built_in">printf</span>(<span class="string">"%d \n"</span>, e);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://haojohnsonlee.github.io/2018/05/30/算法-向量/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Johnson Lee">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="昊江的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/05/30/算法-向量/" itemprop="url">算法-向量-1</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-05-30T16:39:23+08:00">
                2018-05-30
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Words count in article</span>
                
                <span title="Words count in article">
                  1,168
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Reading time</span>
                
                <span title="Reading time">
                  6 mins
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h4 id="向量"><a href="#向量" class="headerlink" title="向量"></a>向量</h4><p>本次实现一个简单的向量结构，拥有遍历，插入，查找，删除接口。</p>
<h4 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h4><h5 id="Vector-h"><a href="#Vector-h" class="headerlink" title="Vector.h"></a>Vector.h</h5><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">pragma</span> once</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;assert.h&gt;</span></span></span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">int</span> Rank;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> DEFAULT_CAPACITY 10 <span class="comment">// 初始向量容量</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Increase</span> &#123;</span> <span class="comment">//这是一个visit对象实例</span></span><br><span class="line">	<span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">operator</span><span class="params">()</span><span class="params">(T &amp; e)</span> </span>&#123; e++; &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt; <span class="class"><span class="keyword">class</span> <span class="title">Vector</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">	Rank _size;</span><br><span class="line">	T* _items;</span><br><span class="line">	<span class="keyword">int</span> _capacity;</span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">copyFrom</span><span class="params">(T* items, <span class="keyword">int</span> lo, <span class="keyword">int</span> hi)</span></span>;</span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">expand</span><span class="params">()</span></span>;</span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">shrink</span><span class="params">()</span></span>;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	Vector(<span class="keyword">int</span> c = DEFAULT_CAPACITY);</span><br><span class="line">	Vector(T* items, <span class="keyword">int</span> lo, <span class="keyword">int</span> hi);</span><br><span class="line">	<span class="keyword">virtual</span> ~Vector();</span><br><span class="line"></span><br><span class="line">	<span class="comment">//只读接口</span></span><br><span class="line">	<span class="function"><span class="keyword">int</span> <span class="title">size</span><span class="params">()</span> <span class="keyword">const</span></span>;</span><br><span class="line">	<span class="comment">//判断是否为空</span></span><br><span class="line">	<span class="function"><span class="keyword">bool</span> <span class="title">empty</span><span class="params">()</span> <span class="keyword">const</span></span>;</span><br><span class="line">	<span class="comment">//插入操作</span></span><br><span class="line">	<span class="function">Rank <span class="title">insert</span><span class="params">(Rank r, <span class="keyword">const</span> T&amp; e)</span></span>;</span><br><span class="line">	<span class="comment">//删除 位于lo 与 hi区间的元素 返回删除个数</span></span><br><span class="line">	<span class="function"><span class="keyword">int</span> <span class="title">remove</span><span class="params">(Rank lo, Rank hi)</span></span>;</span><br><span class="line">	<span class="comment">//删除 位于r 的元素 返回删除个数</span></span><br><span class="line">	<span class="function"><span class="keyword">int</span> <span class="title">remove</span><span class="params">(Rank r)</span></span>;</span><br><span class="line">	<span class="comment">//区间内查找</span></span><br><span class="line">	<span class="function">Rank <span class="title">find</span><span class="params">(<span class="keyword">const</span> T&amp; e, <span class="keyword">int</span> lo, <span class="keyword">int</span> hi)</span></span>;</span><br><span class="line">	<span class="comment">//剔除所有重复元素 O(n^2)</span></span><br><span class="line">	<span class="function"><span class="keyword">int</span> <span class="title">deduplicate</span><span class="params">()</span></span>;</span><br><span class="line">	<span class="comment">//遍历元素</span></span><br><span class="line">	void traverse(void(*visit)(T&amp; e));</span><br><span class="line">	<span class="keyword">template</span> &lt;<span class="keyword">typename</span> VST&gt;  <span class="function"><span class="keyword">void</span> <span class="title">traverse</span><span class="params">(VST&amp; vst)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//可写接口</span></span><br><span class="line">	T &amp; <span class="keyword">operator</span>[] (Rank rank) <span class="keyword">const</span>;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h5 id="Vector-cpp"><a href="#Vector-cpp" class="headerlink" title="Vector.cpp"></a>Vector.cpp</h5><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"stdafx.h"</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"Vector.h"</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line">Vector&lt;T&gt;::Vector(<span class="keyword">int</span> c)</span><br><span class="line">&#123;</span><br><span class="line">	_items = <span class="keyword">new</span> T[_capacity = c];</span><br><span class="line">	_size = <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line">Vector&lt;T&gt;::Vector(T * items, <span class="keyword">int</span> lo, <span class="keyword">int</span> hi)</span><br><span class="line">&#123;</span><br><span class="line">	copyFrom(items, lo, hi);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line">Vector&lt;T&gt;::~Vector()</span><br><span class="line">&#123;</span><br><span class="line">	<span class="keyword">delete</span>[] _items;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="keyword">int</span> Vector&lt;T&gt;::size() <span class="keyword">const</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="keyword">return</span> _size;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="keyword">bool</span> Vector&lt;T&gt;::empty() <span class="keyword">const</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="keyword">return</span> !_size;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line">Rank Vector&lt;T&gt;::insert(Rank r, <span class="keyword">const</span> T&amp; e)</span><br><span class="line">&#123;</span><br><span class="line">	expand();</span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = _size; i &gt; r; i--) </span><br><span class="line">		_items[i] = _items[i - <span class="number">1</span>];</span><br><span class="line">	_items[r] = e; _size++;</span><br><span class="line">	<span class="keyword">return</span> r;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="keyword">int</span> Vector&lt;T&gt;::remove(Rank lo, Rank hi)</span><br><span class="line">&#123;</span><br><span class="line">	<span class="keyword">if</span> (lo == hi) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">while</span> (hi &lt; _size) _items[lo++] = _items[hi++];</span><br><span class="line">	<span class="keyword">int</span> decrease = hi - lo;</span><br><span class="line">	_size = _size - decrease;</span><br><span class="line">	shrink();  <span class="comment">//非必须</span></span><br><span class="line">	<span class="keyword">return</span> decrease;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="keyword">int</span> Vector&lt;T&gt;::remove(Rank r)</span><br><span class="line">&#123;</span><br><span class="line">	<span class="keyword">return</span> remove(r, r + <span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line">Rank Vector&lt;T&gt;::find(<span class="keyword">const</span> T &amp; e, <span class="keyword">int</span> lo, <span class="keyword">int</span> hi)</span><br><span class="line">&#123;</span><br><span class="line">	<span class="keyword">while</span> (lo &lt; hi-- &amp;&amp; e != _items[hi]);</span><br><span class="line">	<span class="keyword">return</span> hi;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="keyword">int</span> Vector&lt;T&gt;::deduplicate()</span><br><span class="line">&#123;</span><br><span class="line">	<span class="keyword">int</span> oldSize = _size;</span><br><span class="line">	<span class="keyword">int</span> i = <span class="number">1</span>;</span><br><span class="line">	<span class="keyword">while</span> (i &lt; _size) &#123;</span><br><span class="line">		find(_items[i], <span class="number">0</span>, i) &lt; <span class="number">0</span> ? i++ : remove(i);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> oldSize - _size;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="keyword">void</span> Vector&lt;T&gt;::traverse(<span class="keyword">void</span>(*visit)(T &amp;e))</span><br><span class="line">&#123;</span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; _size; i++) visit(_items[i]);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> VST&gt;</span><br><span class="line"><span class="keyword">inline</span> <span class="keyword">void</span> Vector&lt;T&gt;::traverse(VST &amp; visit) <span class="comment">//VST 对象进行 "()"操作符重载，执行自定义复杂操作</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; _size; i++) visit(_items[i]);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line">T &amp; Vector&lt;T&gt;::<span class="keyword">operator</span>[](Rank rank) <span class="keyword">const</span></span><br><span class="line">&#123;</span><br><span class="line">	assert(<span class="number">0</span> &lt;= rank &amp;&amp; rank &lt; _size);</span><br><span class="line">	<span class="keyword">return</span> _items[rank];</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="keyword">void</span> Vector&lt;T&gt;::copyFrom(T * items, <span class="keyword">int</span> lo, <span class="keyword">int</span> hi)</span><br><span class="line">&#123;</span><br><span class="line">	assert(lo &lt; hi);</span><br><span class="line">	_items = <span class="keyword">new</span> T[_capacity = (hi - lo) &lt;&lt; <span class="number">1</span>];</span><br><span class="line">	_size = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">while</span> (lo&lt;hi)</span><br><span class="line">		_items[_size++] = items[lo++];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 每次插入前调用该函数</span></span><br><span class="line"><span class="comment"> * 确保不上溢</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="keyword">void</span> Vector&lt;T&gt;::expand()</span><br><span class="line">&#123;</span><br><span class="line">	<span class="keyword">if</span> (_size &lt; _capacity) <span class="keyword">return</span>;  <span class="comment">//不必扩容</span></span><br><span class="line">	<span class="keyword">if</span> (_capacity &lt; DEFAULT_CAPACITY) _capacity = DEFAULT_CAPACITY;   <span class="comment">//至少将最大容量扩展至默认值</span></span><br><span class="line">	<span class="comment">//开辟新数组并复制数组</span></span><br><span class="line">	T* oldElem = _items; _items = <span class="keyword">new</span> T[_capacity &lt;&lt; <span class="number">1</span>];</span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; _size; i++)</span><br><span class="line">		_items[i] = oldElem[i];</span><br><span class="line">	<span class="keyword">delete</span>[] oldElem;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* 每次删除前调用该函数</span></span><br><span class="line"><span class="comment">* 确保不下溢</span></span><br><span class="line"><span class="comment">* 保证一定的空间利用率</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="keyword">void</span> Vector&lt;T&gt;::shrink()</span><br><span class="line">&#123;</span><br><span class="line">	<span class="keyword">if</span> (_capacity &lt; DEFAULT_CAPACITY &lt;&lt; <span class="number">1</span>) <span class="keyword">return</span>; <span class="comment">//不至于最后大小小于默认值</span></span><br><span class="line">	<span class="keyword">if</span> (_size &lt;&lt; <span class="number">2</span> &gt; _capacity)  <span class="keyword">return</span>;</span><br><span class="line">	<span class="comment">// 当元素数量4倍小于最大容量时扩容</span></span><br><span class="line">	T* oldElem = _items; _items = <span class="keyword">new</span> T[_capacity &gt;&gt; <span class="number">1</span>];</span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; _size; i++)</span><br><span class="line">		_items[i] = oldElem[i];</span><br><span class="line">	<span class="keyword">delete</span>[] oldElem;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="Quiz"><a href="#Quiz" class="headerlink" title="Quiz"></a>Quiz</h4><p>Is it possible to replace:<br>是否可以向量扩容代码中的：<br><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; _size; i++) _elem[i] = oldElem[i];</span><br></pre></td></tr></table></figure></p>
<p>in the vector expansion code with:<br>替代为：<br><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">memcpy</span>(_elem, oldElem, _size * <span class="keyword">sizeof</span>(T));</span><br></pre></td></tr></table></figure></p>
<p>P.S.This question involves the relevant knowledge of C++<br>P.S.本题涉及C++的相关知识</p>
<p>Yes, they are equivalent and there will be no problem.<br>是，二者是等价的，不会有任何问题。 No, because the range of elemental intervals for the two copies is different.<br>否，因为二者复制的元素区间范围不同。 No, because the range of elemental intervals for the two copies is different.<br>否，因为二者复制的元素区间范围不同。 - 不正确<br>No, because their efficiency are different.<br>否，因为二者的效率不同。<br>No, because whether the latter can achieve the purpose is related to element type T.<br>否，因为后者能否达到目的与元素类型T有关。</p>
<h4 id="解答"><a href="#解答" class="headerlink" title="解答"></a>解答</h4><p>否，因为后者能否达到目的与元素类型T有关。<br>函数 ~memcpy~ 当~T~不是基本数据类型，并且没有自定义的拷贝函数时，只能执行浅拷贝，当释放原有数组空间时，会使得内容指针成为野指针。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://haojohnsonlee.github.io/2018/05/29/报复/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Johnson Lee">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="昊江的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/05/29/报复/" itemprop="url">报复</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-05-29T20:04:39+08:00">
                2018-05-29
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Words count in article</span>
                
                <span title="Words count in article">
                  51
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Reading time</span>
                
                <span title="Reading time">
                  1 mins
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>今天复习到高数，想起有重要的东西在ex那里，打了个电话那边，接通的那一刻，穷尽我一生能想到最恶毒的语言羞辱了他们。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://haojohnsonlee.github.io/2018/05/29/糟糕的感觉/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Johnson Lee">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="昊江的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/05/29/糟糕的感觉/" itemprop="url">糟糕的感觉</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-05-29T12:38:43+08:00">
                2018-05-29
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Words count in article</span>
                
                <span title="Words count in article">
                  86
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Reading time</span>
                
                <span title="Reading time">
                  1 mins
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>这么久过去了，还是会有糟糕的感觉<br>我向来不是一个善于表达自己的人，我希望改变现状，尝试去更好的沟通交流<br>希望时间能够安排得更紧一点，让我没有闲下来的时候<br>Pain is temporary,quit is forever.<br>希望我能坚持下来<br>慎独</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://haojohnsonlee.github.io/2018/05/28/别停下来/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Johnson Lee">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="昊江的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/05/28/别停下来/" itemprop="url">别停下来</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-05-28T21:25:19+08:00">
                2018-05-28
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Words count in article</span>
                
                <span title="Words count in article">
                  30
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Reading time</span>
                
                <span title="Reading time">
                  1 mins
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>复习生活还是那么有趣<br>只是不能停下来<br>每一条未知的路 都有未来<br>慎独  </p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://haojohnsonlee.github.io/2018/05/28/Computer Systems series-1/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Johnson Lee">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="昊江的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/05/28/Computer Systems series-1/" itemprop="url">Computer Systems series-1</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-05-28T15:34:30+08:00">
                2018-05-28
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Words count in article</span>
                
                <span title="Words count in article">
                  477
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Reading time</span>
                
                <span title="Reading time">
                  3 mins
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="Introduce"><a href="#Introduce" class="headerlink" title="Introduce"></a>Introduce</h3><p>This part is description of thoughts about 《Computer Systems, A Programmer’s Perspective》.It’s will be written in English to save time of translation. As lacking of time, I will only read the most important sections before the final examination. You can follow up after the final examination if you are interested, there also will be some fascinating labs about computer systems.</p>
<h3 id="Section-1-1–A-Tour-of-Computer-Systems"><a href="#Section-1-1–A-Tour-of-Computer-Systems" class="headerlink" title="Section 1.1–A Tour of Computer Systems"></a>Section 1.1–A Tour of Computer Systems</h3><h4 id="Complier"><a href="#Complier" class="headerlink" title="Complier"></a>Complier</h4><p>This section is a brief introduction of computer system.All things start whih tracing the lifetime of a C program<br><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//hello.c</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"hello world\n"</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>We all kown that if we type<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gcc -o hello hello.c</span><br></pre></td></tr></table></figure></p>
<p>in an Unix shell,the gcc complier will produce a executable file named “hello”. After that, the program can output a string on the shell “hello world”.<br>What happened in complier?</p>
<ul>
<li>Preprocessing phase<br>The complier modifies the original C program according to directives that begin whth ‘#’ character. At the sample program, the complier insert the content of “stdio.h” into program text.</li>
<li>Complilation phase<br>The complier translate C program produced at last phase into an assembly language program. Assembly language provide a common output for different high-level language.</li>
<li>Assembly phase<br>At this part, the assembler translates program into machine language instructions, packages them and stores in file hello.o, it’s a binary file.</li>
<li>Linking phase<br>We can see ~hello.c~ uses a function named ~printf~, but we haven’s defined it in our source code, The function resides in a separate precomplied object file called ~printf.o~ which should be merged with ~hello.o~ program. The linker handle it at this pahse. The result is the ~hello~ file, you can execute it now. <h4 id="Hardware-Organization"><a href="#Hardware-Organization" class="headerlink" title="Hardware Organization"></a>Hardware Organization</h4></li>
<li>Buses<br>Buses carry bytes of information bace and forth between the componments.they are always typically designed to transfer fixed-size chunks of bytes konwn as ~words~, most machines today the size of ~words~ is 4 bytes(32 bits) or 8 bytes(64 bits). </li>
<li>I/O Devices<br>Input/Output devices are the connetions between computer and external world.We will discuss how I/O devices work later.</li>
<li>Main Memory<br>A temporary storage device that holds both a program and the data.</li>
<li>Processor<br>The ~central-propressing-unit~ (CPU) or simple ~processor~, is the engine that interprets and executes instructions stored in main memory. <h4 id="Software-amp-Hardware"><a href="#Software-amp-Hardware" class="headerlink" title="Software &amp; Hardware"></a>Software &amp; Hardware</h4>When we type ~./hello~ at the keyboard, the shell read them into a register and stores them in memory.Then the shell load ~hello~ file into main memory,the CPU execute all instructions, the characters will eventrually be printed out.<h4 id="Sunmmary"><a href="#Sunmmary" class="headerlink" title="Sunmmary"></a>Sunmmary</h4>This section introduce how complier works and the main<br>hardwera in computer briefly. Next sections will have a Detailed introduction of them, and how them works like a whole. </li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://haojohnsonlee.github.io/2018/05/26/算法-有序的双向链表/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Johnson Lee">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="昊江的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/05/26/算法-有序的双向链表/" itemprop="url">算法-有序的双向链表</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-05-26T15:55:21+08:00">
                2018-05-26
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Words count in article</span>
                
                <span title="Words count in article">
                  690
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Reading time</span>
                
                <span title="Reading time">
                  4 mins
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="引言"><a href="#引言" class="headerlink" title="引言"></a>引言</h3><p>链表是一种物理结构上不连续，非顺序的数据结构,其逻辑顺序结构是以结点内的指针来确定的，此篇文章实现一个特殊的链表结构,其中的元素在插入时就是有序的排列。</p>
<h3 id="分析"><a href="#分析" class="headerlink" title="分析"></a>分析</h3><p>要实现有序的链表，必然要比较链表内数据的大小，然后在合适的地方插入。当判断到某一点可插入时进行插入。可选择单向链表实现，但每次判断需要保存上一点的信息。这里使用双向链表结构来实现。<br>每个节点保存的信息:存储内容、前一个节点指针、后一个节点指针。</p>
<h3 id="实现"><a href="#实现" class="headerlink" title="实现"></a>实现</h3><h4 id="SortedLinkedList-h"><a href="#SortedLinkedList-h" class="headerlink" title="SortedLinkedList.h"></a>SortedLinkedList.h</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">pragma</span> once</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="comment">//节点信息</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Node</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">    T item;</span><br><span class="line">    Node* next;</span><br><span class="line">    Node* pre;</span><br><span class="line">    Node&lt;T&gt;(T item) &#123;</span><br><span class="line">        <span class="keyword">this</span>-&gt;item = item;</span><br><span class="line">        <span class="keyword">this</span>-&gt;next = <span class="literal">NULL</span>;</span><br><span class="line">        <span class="keyword">this</span>-&gt;pre = <span class="literal">NULL</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">LinkedList</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    LinkedList();</span><br><span class="line">    ~LinkedList();</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">insert</span><span class="params">(T item)</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">printList</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="keyword">void</span> _insert(Node&lt;T&gt;* head, Node&lt;T&gt;* temp);</span><br><span class="line">    <span class="keyword">void</span> _printList(Node&lt;T&gt;* head);</span><br><span class="line">    <span class="comment">//头结点</span></span><br><span class="line">    Node&lt;T&gt;* head;</span><br><span class="line">    <span class="comment">//节点总数</span></span><br><span class="line">    <span class="keyword">int</span> count;</span><br><span class="line">    <span class="comment">//插入节点数值相同数量</span></span><br><span class="line">    <span class="keyword">int</span> sameCount;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h4 id="SortedLinkedList-cpp"><a href="#SortedLinkedList-cpp" class="headerlink" title="SortedLinkedList.cpp"></a>SortedLinkedList.cpp</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"LinkedList.h"</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line">LinkedList&lt;T&gt;::LinkedList()</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">this</span>-&gt;head = <span class="literal">NULL</span>;</span><br><span class="line">    <span class="keyword">this</span>-&gt;count = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">this</span>-&gt;sameCount = <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line">LinkedList&lt;T&gt;::~LinkedList()</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">delete</span> <span class="keyword">this</span>-&gt;head;</span><br><span class="line">    <span class="keyword">this</span>-&gt;head = <span class="literal">NULL</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="keyword">void</span> LinkedList&lt;T&gt;::insert(T item)</span><br><span class="line">&#123;</span><br><span class="line">    Node&lt;T&gt;* temp = <span class="keyword">new</span> Node&lt;T&gt;(item);</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">this</span>-&gt;head == <span class="literal">NULL</span>) &#123;</span><br><span class="line">        <span class="keyword">this</span>-&gt;head = temp;</span><br><span class="line">        <span class="keyword">this</span>-&gt;count = <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> &#123;</span><br><span class="line">        _insert(<span class="keyword">this</span>-&gt;head, temp);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="keyword">void</span> LinkedList&lt;T&gt;::printList()</span><br><span class="line">&#123;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"START&lt;-&gt;"</span>;</span><br><span class="line">    _printList(<span class="keyword">this</span>-&gt;head);</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="built_in">endl</span> &lt;&lt; <span class="string">"含有"</span> &lt;&lt; <span class="keyword">this</span>-&gt;sameCount &lt;&lt; <span class="string">"个重复值"</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    head最初为头结点</span></span><br><span class="line"><span class="comment">    temp为插入的节点</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="keyword">void</span> LinkedList&lt;T&gt;::_insert(Node&lt;T&gt;* head, Node&lt;T&gt;* temp)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">if</span> (head==<span class="literal">NULL</span>) &#123;</span><br><span class="line">        head = temp;</span><br><span class="line">        <span class="keyword">this</span>-&gt;count += <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (head-&gt;item &lt; temp-&gt;item) &#123;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (head-&gt;next == <span class="literal">NULL</span>) &#123;</span><br><span class="line">                head-&gt;next = temp;</span><br><span class="line">                temp-&gt;pre = head;</span><br><span class="line">                <span class="keyword">this</span>-&gt;count += <span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> &#123;</span><br><span class="line">                _insert(head-&gt;next, temp);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(head-&gt;item == temp-&gt;item)&#123;</span><br><span class="line">            <span class="keyword">this</span>-&gt;sameCount += <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="comment">//头结点</span></span><br><span class="line">            <span class="keyword">if</span> (head-&gt;pre == <span class="literal">NULL</span>) &#123;</span><br><span class="line">                temp-&gt;next = head;</span><br><span class="line">                head-&gt;pre = temp;</span><br><span class="line">                <span class="keyword">this</span>-&gt;head = temp;</span><br><span class="line">                <span class="keyword">this</span>-&gt;count += <span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> &#123;</span><br><span class="line">                temp-&gt;next = head;</span><br><span class="line">                temp-&gt;pre = head-&gt;pre;</span><br><span class="line">                head-&gt;pre-&gt;next = temp;</span><br><span class="line">                head-&gt;pre = temp;</span><br><span class="line">                <span class="keyword">this</span>-&gt;count += <span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    打印整个链表</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="keyword">void</span> LinkedList&lt;T&gt;::_printList(Node&lt;T&gt;* head)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">if</span> (head == <span class="literal">NULL</span>) &#123;</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; <span class="string">"DONE"</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; head-&gt;item &lt;&lt;<span class="string">"&lt;-&gt;"</span>;</span><br><span class="line">        _printList(head-&gt;next);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">char</span> *argv[])</span> </span>&#123;</span><br><span class="line">    LinkedList&lt;<span class="keyword">int</span>&gt;* s = <span class="keyword">new</span> LinkedList&lt;<span class="keyword">int</span>&gt;();</span><br><span class="line">    <span class="keyword">int</span> p[] = &#123;<span class="number">5</span>,<span class="number">6</span>,<span class="number">8</span>,<span class="number">2</span>,<span class="number">6</span>,<span class="number">9</span>,<span class="number">1</span>,<span class="number">7</span>,<span class="number">6</span>,<span class="number">6</span>,<span class="number">6</span>,<span class="number">6</span>,<span class="number">6</span>,<span class="number">6</span>&#125;;</span><br><span class="line">    <span class="keyword">int</span> count = <span class="keyword">sizeof</span>(p) / <span class="keyword">sizeof</span>(<span class="keyword">int</span>);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; count; i++) &#123;</span><br><span class="line">        s-&gt;insert(p[i]);</span><br><span class="line">    &#125;</span><br><span class="line">    s-&gt;printList();</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://haojohnsonlee.github.io/2018/05/26/算法-回文串/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Johnson Lee">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="昊江的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/05/26/算法-回文串/" itemprop="url">算法--回文串</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-05-26T15:36:49+08:00">
                2018-05-26
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Words count in article</span>
                
                <span title="Words count in article">
                  423
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Reading time</span>
                
                <span title="Reading time">
                  2 mins
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="开篇"><a href="#开篇" class="headerlink" title="开篇"></a>开篇</h3><p>今天开始算法与数据结构篇的编写，将会更新所有考试中需要用到的算法与数据结构，考完之后随缘更新。参考书目《算法 第四版》(《Algorithms Fourth Edition》)。主要描述语言为C/C++,可能有部分算法使用java/python/m(matlab)描述。</p>
<h3 id="引言"><a href="#引言" class="headerlink" title="引言"></a>引言</h3><p>今天做一个简单引入，我们都知道回文在中国诗词中十分流行，优美至极。比如有:</p>
<blockquote>
<p>莺啼岸柳弄春晴，柳弄春晴夜月明。<br>  明月夜晴春弄柳，晴春弄柳岸啼莺。</p>
</blockquote>
<p>狭义的回文指的是正序逆序文字的顺序依旧不改变。今天描述的便是如何判断一个字串是否为回文。</p>
<h3 id="实现"><a href="#实现" class="headerlink" title="实现"></a>实现</h3><p>正序逆序都一样的字串，我们可以利用队列与栈的特性进行字串比较，具体代码:<br><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stack&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> STR_LENGH 300</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">	利用栈和队列判断输入的字符串是否为回文串</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">isMoslems</span><span class="params">(<span class="keyword">char</span>* str)</span> </span>&#123;</span><br><span class="line">	<span class="built_in">stack</span>&lt;<span class="keyword">char</span>&gt; s;</span><br><span class="line">	<span class="built_in">queue</span>&lt;<span class="keyword">char</span>&gt; q;</span><br><span class="line">	<span class="built_in">string</span> moslems = str;</span><br><span class="line">	<span class="comment">//输入栈与队列的内容</span></span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; moslems.length(); i++) &#123;</span><br><span class="line">		<span class="keyword">char</span> temp = moslems[i];</span><br><span class="line">		s.push(temp);</span><br><span class="line">		q.push(temp);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">//char值相同继续判断，直到栈与队列为空</span></span><br><span class="line">	<span class="keyword">while</span> (!s.empty() &amp;&amp; !q.empty())</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">if</span> (s.top() != q.front()) &#123;</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		s.pop();</span><br><span class="line">		q.pop();</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">//栈与队列全为空则为回文串</span></span><br><span class="line">	<span class="keyword">return</span> s.empty() &amp;&amp; q.empty();</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">char</span> *argv[])</span> </span>&#123;</span><br><span class="line">	<span class="keyword">int</span> times = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">while</span> (times&lt;<span class="number">4</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">cout</span> &lt;&lt; <span class="string">"输入一个字符串:"</span>;</span><br><span class="line">		<span class="keyword">char</span> str[STR_LENGH];</span><br><span class="line">		gets_s(str, STR_LENGH);</span><br><span class="line">		<span class="keyword">char</span>* ok = isMoslems(str) ? <span class="string">"YES"</span> : <span class="string">"NO"</span>;</span><br><span class="line">		<span class="built_in">cout</span> &lt;&lt; ok &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">		times++;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://haojohnsonlee.github.io/2018/05/26/设计模式-单例模式/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Johnson Lee">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="昊江的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/05/26/设计模式-单例模式/" itemprop="url">设计模式--单例模式</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-05-26T11:39:38+08:00">
                2018-05-26
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Words count in article</span>
                
                <span title="Words count in article">
                  1,204
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Reading time</span>
                
                <span title="Reading time">
                  5 mins
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="开篇"><a href="#开篇" class="headerlink" title="开篇"></a>开篇</h2><p>今天开始编写一些面向对象编程所涉及到的一些设计模式，不定时更新。此部分参考自《设计模式–可复用面向对象软件的基础》(《Design Patterns–Elements of Reusable Object-Oriented Software》)<br>根据设计模式的目的性，设计模式可分为创建型(Creational)、结构型(Structural)和行为型(Behavioral)三种，分别对应着对象的创建、对象的组合处理以及对象的交互。我们将依次介绍所有可能涉及到的设计模式进行一个简单的介绍，并且使用java语言描述。介绍完成之后通过对java巨无霸–<a href="https://spring.io/" target="_blank" rel="noopener">Spring Framework</a>所涉及到的设计模式进行分析。</p>
<h3 id="引言"><a href="#引言" class="headerlink" title="引言"></a>引言</h3><p>单例模式是我接触的第一个设计模式，也较为简单，所以用它来开篇。</p>
<h3 id="使用动机"><a href="#使用动机" class="headerlink" title="使用动机"></a>使用动机</h3><p>通常，某个类的实例(instance)会在多个地方使用，但是全局只能同时使用同一个实例。举个例子，我经常需要使用扫把，每次我想要扫把的时候都去仓库拿，但是我每次都想要我最开始的那一把，因为我使用习惯了，对我来说最合适。需要一种模式保证人不会出错的能确保我得到我的那把扫把。</p>
<h3 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h3><p>如何保证全局只有一个实例？设想如果仓库里总共就一把扫把，当然能够拿到我需要的。新的问题来了，如何保证仓库只有一把扫把？可以从这方面考虑，我们每次取扫把的时候，问问仓库你那里有没有扫把？如果没有的话，就帮我造一把，否则就直接把已经有的给我；或者仓库一开始就只有一把扫把，我一来问就给我，而且不允许在仓库外造扫把。所以我们可以使用这样一种方式–让类自身保存全局唯一的实例，并且对外不提供创建类实例的方法。<br>我们知道，java类实例的创建是通过访问构造函数来创建的。通常会有一个默认的空构造函数，这就让我们能够用<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//造扫把的过程</span></span><br><span class="line">Singleton instance = <span class="keyword">new</span> Singleton();</span><br></pre></td></tr></table></figure></p>
<p>的方式来创建类的实例，每次调用构造方法，就会返回一个新的实例,将构造函数设置为private便可以阻止类外部实例化。<br>但是新的问题又来了，什么时候造扫把？我问之前还是我问之后？分析两种过程:</p>
<ul>
<li><p>我问之前: 当我问之前就造好了扫把的话，我去问立马就能给我，速度快不用担心等待时间长。但是他最开始不知道我的喜好，只能按照他自己想的造扫把，可能不会很适合我。实现如下:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Singleton</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> DEFAULT_LONG = <span class="number">1</span>;</span><br><span class="line">    <span class="comment">//只能造1米的扫把</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> Singleton instance =<span class="keyword">new</span> Singleton(DEFAULT_LONG);</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> initLong;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">Singleton</span><span class="params">(<span class="keyword">int</span> initLong)</span></span>&#123; <span class="keyword">this</span>.initLong = initLong;&#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Singleton <span class="title">getInstance</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> instance;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>我问之后：当我去拿扫把时，我需要询问仓库是否有造好了的扫把，没有的话快帮我造一把。虽然会有等待的时间，但是我我可以说我需要扫把长 1.5 米，尽量轻一点的扫把。实现如下:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Singleton</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> Singleton instance;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> initLong;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">Singleton</span><span class="params">(<span class="keyword">int</span> initLong)</span></span>&#123; <span class="keyword">this</span>.initLong = initLong;&#125;</span><br><span class="line">    <span class="comment">//initLong 决定我要的扫把长</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Singleton <span class="title">getInstance</span><span class="params">(<span class="keyword">int</span> initLong)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(instance == <span class="keyword">null</span>)&#123;</span><br><span class="line">            instance = <span class="keyword">new</span> Singleton(initLong);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> instance;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="改进"><a href="#改进" class="headerlink" title="改进"></a>改进</h3><p>以上两种是是最为基本的两种单例模式的实现；仔细对第二种方法进行思考，当我问仓库要扫把的时候，在它没有造好的时候别人问了一次，他就会再造一把新的，那我就不能肯定我每次问的得到的是同一把扫把。所以当他在扫把的时候，我不允许别人再问它了，这个时候它只能为我服务就行了。实现如下:<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Singleton</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> Singleton instance;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> initLong;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">Singleton</span><span class="params">(<span class="keyword">int</span> initLong)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.initLong = initLong;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Singleton <span class="title">getInstance</span><span class="params">(<span class="keyword">int</span> initLong)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (instance == <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">synchronized</span> (Singleton.class) &#123;</span><br><span class="line">                <span class="keyword">if</span> (instance == <span class="keyword">null</span>)</span><br><span class="line">                    instance = <span class="keyword">new</span> Singleton(initLong);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> instance;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h3><p>以上，就保证了全局具有唯一的Singleton实例，也就是每次我都能拿到同一把扫把。单例模式有以下优点:</p>
<ol>
<li>保证类实例全局唯一，严格控制外部访问。</li>
<li>改进了全局变量模式，避免污染变量空间。</li>
<li>允许对操作和表示精细化。</li>
<li>允许可变数目的实例。</li>
<li>比直接操作类更为灵活。</li>
</ol>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/2/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><a class="page-number" href="/page/2/">2</a><span class="page-number current">3</span><a class="page-number" href="/page/4/">4</a><a class="extend next" rel="next" href="/page/4/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel sidebar-panel-active">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/images/avatar.jpg"
               alt="Johnson Lee" />
          <p class="site-author-name" itemprop="name">Johnson Lee</p>
           
              <p class="site-description motion-element" itemprop="description">以后将会在此发布一些生活的、技术的、学业的各种分享在这里，以期记录我的点点滴滴</p>
          
        </div>
        <nav class="site-state motion-element">

          
            <div class="site-state-item site-state-posts">
              <a href="/archives/">
                <span class="site-state-item-count">33</span>
                <span class="site-state-item-name">posts</span>
              </a>
            </div>
          

          

          
            
            
            <div class="site-state-item site-state-tags">
              
                <span class="site-state-item-count">10</span>
                <span class="site-state-item-name">tags</span>
              
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
        </div>

        
        

        
        

        


      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2018</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Johnson Lee</span>
</div>


<div class="powered-by">
  Powered by <a class="theme-link" href="https://hexo.io">Hexo</a>
</div>

<div class="theme-info">
  Theme -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Muse
  </a>
</div>


        

        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.2"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.2"></script>



  
  

  
    <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.2"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.2"></script>

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.2"></script>



  


  




	





  





  






  





  

  

  

  

  

  

</body>
</html>
