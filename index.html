<!DOCTYPE html>



  


<html class="theme-next muse use-motion" lang="zh-CN">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.2" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Hexo, NexT" />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.2" />






<meta name="description" content="以后将会在此发布一些生活的、技术的、学业的各种分享在这里，以期记录我的点点滴滴">
<meta name="keywords" content="随性、随心">
<meta property="og:type" content="website">
<meta property="og:title" content="昊江的博客">
<meta property="og:url" content="https://haojohnsonlee.github.io/index.html">
<meta property="og:site_name" content="昊江的博客">
<meta property="og:description" content="以后将会在此发布一些生活的、技术的、学业的各种分享在这里，以期记录我的点点滴滴">
<meta property="og:locale" content="zh-CN">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="昊江的博客">
<meta name="twitter:description" content="以后将会在此发布一些生活的、技术的、学业的各种分享在这里，以期记录我的点点滴滴">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    sidebar: {"position":"left","display":"post","offset":12,"offset_float":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="https://haojohnsonlee.github.io/"/>





  <title>昊江的博客</title>
  




<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
          m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-119891946-1', 'auto');
  ga('send', 'pageview');
</script>











</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-CN">

  
  
    
  

  <div class="container sidebar-position-left 
   page-home 
 ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta custom-logo">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">昊江的博客</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">以后将会在此发布一些生活的、技术的、学业的各种分享在这里，以期记录我的点点滴滴</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            About
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            Archives
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://haojohnsonlee.github.io/2018/07/04/java杂记/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Johnson Lee">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="昊江的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/07/04/java杂记/" itemprop="url">java杂记</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-07-04T19:16:17+08:00">
                2018-07-04
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Words count in article</span>
                
                <span title="Words count in article">
                  1,516
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Reading time</span>
                
                <span title="Reading time">
                  6 mins
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <ol>
<li>byte -&gt; shor t-&gt; char -&gt; int -&gt; long -&gt; float -&gt; double</li>
<li><img src="http://pbc5upl77.bkt.clouddn.com/2527957_1498180954324_D83CBF646B3F43FE947460F6D7231780.png" alt="image"></li>
<li><img src="http://pbc5upl77.bkt.clouddn.com/7010483_1490969513544_B5CDD8870777EEC7D957D189E573CF3B.png" alt="image"></li>
<li>方法重载(Overload)的要求:<ol>
<li>函数名要一致。</li>
<li>形参列表不一致（形参的个数或形参 的类型不一致）</li>
<li>与返回值类型无关。</li>
</ol>
</li>
<li>方法重写(Override)要注意的事项：<ol>
<li>方法重写时,方法名与形参列表必须一致。</li>
<li>方法重写时,子类的权限修饰符必须要大于或者等于父类的权限修饰符。</li>
<li>方法重写时,子类的返回值类型必须要小于或者 等于父类的返回值类型。</li>
<li>方法重写时,子类抛出的异常类型要小于或者等于父类抛出的异常类型。  </li>
</ol>
</li>
<li>HttpServletRequest类主要处理：  <ol>
<li>读取和写入HTTP头标</li>
<li>取得和设置cookies</li>
<li>取得路径信息</li>
<li>标识HTTP会话</li>
</ol>
</li>
<li><a href="http://blog.51cto.com/qing0991/1387200" target="_blank" rel="noopener">关于Java中try-catch-finally-return的执行顺序</a></li>
<li>运行时数据区包括：程序计数器、虚拟机栈、本地方法栈、Java堆、方法区以及方法区中的运行时常量池:<ol>
<li>程序计数器： <strong>线程私有</strong>，是当前线程所执行的字节码的行号指示器，如果线程正执行一个java方法，计数器记录正在执行的虚拟机字节码指令的地址，如果线程正在执行的是Native方法，则计数器值为空；</li>
<li>虚拟机栈： 即栈区， <strong>线程私有</strong> ，为虚拟机执行 Java 方法（字节码）服务，每个方法在执行的时会创建一个栈帧用于存放局部变量表、操作数栈、动态链接和方法出口等信息，每个方法的调用直至执行完成对应于栈帧的入栈和出栈；</li>
<li>本地方法栈：为虚拟机使用的Native方法服务，也是<strong>线程私有</strong>；</li>
<li>Java 堆：在虚拟机启动时创建，<strong>线程共享</strong> ，唯一目的是存放对象实例，是垃圾收集器管理的主要区域——” GC 堆“，可以细分为新生代和老年代，新生代又可以细分为 Eden 空间、 From Survivor空间和To Survivor空间；物理上可以不连续，但逻辑上连续，可以选择固定大小或者扩展；</li>
<li>方法区： <strong>线程共享</strong> ，用于存储被虚拟机加载的类信息、常量、静态变量、即时编译器编译后的代码等数据。被称为“永久代”，是因为 HotSpot 虚拟机的设计团队把 GC 分代收集扩展到方法区，即使用永久代来实现方法区，像 GC 管理 Java 堆一样管理方法区，从而省去专门为方法区编写内存管理代码，内存回收目标是针对常量池的回收和堆类型的卸载；</li>
<li>运行时常量池：<strong>线程共享</strong> ，是方法区的一部分， C lass 文件中存放编译期生成的各种字面量和符号引用，类加载后进入方法区的运行时常量池中。</li>
</ol>
</li>
<li><a href="https://blog.csdn.net/javazejian/article/details/72772461" target="_blank" rel="noopener">简述java内存模型</a></li>
<li><p>DispatcherServlet是前端控制器(Front Controller)设计模式的实现主要用作职责调度工作，本身主要用于控制流程<br><img src="http://pbc5upl77.bkt.clouddn.com/springMVCA.png" alt="image"><br>主要职责如下：</p>
<ol>
<li>文件上传解析，如果请求类型是multipart将通过MultipartResolver进行文件上传解析；</li>
<li>通过HandlerMapping，将请求映射到处理器（返回一个HandlerExecutionChain，它包括一个处理器、多个HandlerInterceptor拦截器）；</li>
<li>通过HandlerAdapter支持多种类型的处理器(HandlerExecutionChain中的处理器)；</li>
<li>通过ViewResolver解析逻辑视图名到具体视图实现；</li>
<li>本地化解析；</li>
<li>渲染具体的视图等；</li>
<li>如果执行过程中遇到异常将交给HandlerExceptionResolver来解析。</li>
</ol>
</li>
<li><p>当父类，和子类有static时，先初始化父类static，再初始化子类的static，再初始化父类的其他成员变量－&gt;父类构造方法－&gt;子类其他成员变量－&gt;子类的构造方法。<br>父类上层还有父类时，总是先执行最顶层父类的Static－－&gt;派生类static－－&gt;派生类static－－&gt;…－－&gt;子类static－－&gt;顶层父类的其他成员变量－－&gt;父类构造方法－－&gt;派生类的其他成员变量－－&gt;派生类构造方法－－&gt;…－－&gt;子类其他成员变量－－&gt;子类构造方法。<br>同级static块按照出现顺序初始化。</p>
</li>
<li>JSP生命周期:<br><img src="http://pbc5upl77.bkt.clouddn.com/jsp_life_cycle.jpg" alt="image"><ol>
<li>第一次发起请求，将jsp文件转化为servlet源文件,编译。执行jspInit()方法，生命周期内只调用一次。</li>
<li>调用jspServive()方法</li>
<li>当容器移除该Servlet、该Servlet发生更改、服务关闭调用jspDestroy()方法。</li>
</ol>
</li>
<li>hashcode和equals的约定关系如下：<ol>
<li>如果两个对象相等(equals == true)，那么他们一定有相同的哈希值（hash code）。</li>
<li>如果两个对象的哈希值相等，那么这两个对象有可能相等也有可能不相等。  </li>
</ol>
</li>
</ol>
<p>作为散列表的key值的对象，若判定为相同，必须有相同的hash code并且equals方法返回true。  </p>
<ol start="14">
<li><p>当一个线程被标记成daemon线程，意味着当主线程结束，并且没有其它正在运行的非daemon线程时，该daemon线程也会自动结束。  </p>
</li>
<li><ol>
<li>Only public &amp; abstract are permitted before interface declare.  </li>
<li>Only public, protected, private, abstract &amp; static are permitted before internal interface declare. </li>
</ol>
</li>
<li><p>数值表示:</p>
<ol>
<li>有符号数：是针对二进制来讲的。用最高位作为符号位，“0”代表“+”，“1”代表“-</li>
<li>计算机中负数是以补码的形式保存的,对于正数，原码与补码相同;对于负数，将补码除符号位之外，按位取反，末位加1得到原码。</li>
</ol>
</li>
<li><a href="https://blog.csdn.net/javazejian/article/details/71333103" target="_blank" rel="noopener">深入理解Java枚举类型(enum)</a></li>
<li>Java虚拟机中通常使用UTF-16的方式保存一个char类型数值</li>
<li>实现国际化应用常用的手段是利用ResourceBundle类</li>
<li>java.sql 部分接口继承关系</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">graph LR</span><br><span class="line">PreparedStatment--&gt;Statement</span><br><span class="line">CallableStatment--&gt;PreparedStatment</span><br></pre></td></tr></table></figure>
<ol start="21">
<li>接口中的变量默认是public static final 的，方法默认是public abstract 的。</li>
</ol>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://haojohnsonlee.github.io/2018/07/04/推荐列表/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Johnson Lee">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="昊江的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/07/04/推荐列表/" itemprop="url">推荐列表</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-07-04T14:32:47+08:00">
                2018-07-04
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Words count in article</span>
                
                <span title="Words count in article">
                  193
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Reading time</span>
                
                <span title="Reading time">
                  1 mins
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="Pre"><a href="#Pre" class="headerlink" title="Pre"></a>Pre</h2><p>票圈分享音乐已经满足不了我了，还有更多的东西希望大家可以一起读读、一起听听、一起看看。<br>在这里，我会写上一些看过的、听过的、想看的和想听的有趣的东西，如果有足够吸引力的话，还会写上我的一些拙见，以期一起讨论。<br>有一些墙外有趣的东西，也会搬运下来一起分享。<br>如果提供的链接过期，请留言。<br>如果云存储申请好了，就可以直接下载一些电影、书和音乐了。</p>
<h2 id="Finished-List"><a href="#Finished-List" class="headerlink" title="Finished List"></a>Finished List</h2><p><a href="http://music.163.com/song?id=340365&amp;userid=257118394" target="_blank" rel="noopener">Forever 21 </a><br><a href="http://music.163.com/song?id=29418037&amp;userid=257118394" target="_blank" rel="noopener">微光</a><br><a href="http://music.163.com/song?id=36198480&amp;userid=257118394" target="_blank" rel="noopener">Stitches</a><br><a href="http://music.163.com/song?id=29004400&amp;userid=257118394" target="_blank" rel="noopener">烟火里的尘埃</a><br><a href="http://music.163.com/song?id=28592013&amp;userid=257118394" target="_blank" rel="noopener">Slipin</a><br><a href="http://music.163.com/song?id=507783538&amp;userid=257118394" target="_blank" rel="noopener">Starry Starry Night</a><br><a href="http://music.163.com/song?id=542763586&amp;userid=257118394" target="_blank" rel="noopener">童话镇</a><br><a href="http://music.163.com/song?id=550661&amp;userid=257118394" target="_blank" rel="noopener">手紙 ~拝啓 十五の君へ~</a><br><a href="http://music.163.com/song?id=569214247&amp;userid=257118394" target="_blank" rel="noopener">平凡的一天</a><br><a href="http://music.163.com/song?id=2175282&amp;userid=257118394" target="_blank" rel="noopener">Heartbeats </a><br><a href="http://music.163.com/song?id=470057375&amp;userid=257118394" target="_blank" rel="noopener">至此流年各天涯</a></p>
<h2 id="TODO-List"><a href="#TODO-List" class="headerlink" title="TODO List"></a>TODO List</h2>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://haojohnsonlee.github.io/2018/07/03/算法-明明的随机数/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Johnson Lee">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="昊江的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/07/03/算法-明明的随机数/" itemprop="url">算法-明明的随机数</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-07-03T22:08:23+08:00">
                2018-07-03
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Words count in article</span>
                
                <span title="Words count in article">
                  484
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Reading time</span>
                
                <span title="Reading time">
                  3 mins
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="描述"><a href="#描述" class="headerlink" title="描述"></a>描述</h3><p>明明想在学校中请一些同学一起做一项问卷调查，为了实验的客观性，他先用计算机生成了N个1到1000之间的随机整数（N&lt;1000），对于其中重复的数字，只保留一个，把其余相同的数去掉，不同的数对应着不同的学生的学号。然后再把这些数从小到大排序，按照排好的顺序去找同学做调查。请你协助明明完成“去重”与“排序”的工作。</p>
<h3 id="输入"><a href="#输入" class="headerlink" title="输入"></a>输入</h3><p>输入多行，先输入随机整数的个数，再输入相应个数的整数</p>
<blockquote>
<p>11<br>10<br>20<br>40<br>32<br>67<br>40<br>20<br>89<br>300<br>400<br>15  </p>
</blockquote>
<h3 id="输出"><a href="#输出" class="headerlink" title="输出"></a>输出</h3><blockquote>
<p>10<br>15<br>20<br>32<br>40<br>67<br>89<br>300<br>400  </p>
</blockquote>
<h3 id="实现"><a href="#实现" class="headerlink" title="实现"></a>实现</h3><h4 id="实现一"><a href="#实现一" class="headerlink" title="实现一"></a>实现一</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">dunpliAndSort</span><span class="params">(ArrayList&lt;Integer&gt; input)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span>[] map = <span class="keyword">new</span> <span class="keyword">int</span>[<span class="number">1000</span>];</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">1000</span>; i++) &#123;</span><br><span class="line">            map[i] = <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; input.size(); i++) &#123;</span><br><span class="line">            <span class="keyword">int</span> cur = input.get(i);</span><br><span class="line">            <span class="keyword">if</span> (map[cur] == <span class="number">0</span>) &#123; <span class="comment">//插入排序</span></span><br><span class="line">                map[cur] = <span class="number">1</span>;</span><br><span class="line">                <span class="keyword">int</span> p = i;</span><br><span class="line">                <span class="keyword">for</span> (<span class="keyword">int</span> j = i - <span class="number">1</span>; j &gt;= <span class="number">0</span>; j--) &#123;</span><br><span class="line">                    <span class="keyword">if</span> (input.get(j) &gt; input.get(p)) &#123;</span><br><span class="line">                        <span class="keyword">int</span> temp = input.get(j);</span><br><span class="line">                        input.set(j, cur);</span><br><span class="line">                        input.set(p, temp);</span><br><span class="line">                        p--;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123; <span class="comment">//去重</span></span><br><span class="line">                input.remove(i);</span><br><span class="line">                i--;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        ArrayList&lt;Integer&gt; s = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">        Scanner sc = <span class="keyword">new</span> Scanner(System.in);</span><br><span class="line">        <span class="keyword">int</span> n = sc.nextInt();</span><br><span class="line">        <span class="keyword">int</span> i = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span> (i &lt; n &amp;&amp; sc.hasNext()) &#123;</span><br><span class="line">            s.add(sc.nextInt());</span><br><span class="line">            i++;</span><br><span class="line">        &#125;</span><br><span class="line">        dunpliAndSort(s);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> p = <span class="number">0</span>; p &lt; s.size(); p++) &#123;</span><br><span class="line">            System.out.println(s.get(p));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="实现二"><a href="#实现二" class="headerlink" title="实现二"></a>实现二</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Created by Johnson on 2018/7/3.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span>&#123;</span><br><span class="line">        <span class="keyword">int</span> N,n;</span><br><span class="line">        Scanner sc = <span class="keyword">new</span> Scanner(System.in);</span><br><span class="line">        <span class="keyword">while</span>(sc.hasNextInt())&#123;</span><br><span class="line">            N = sc.nextInt();</span><br><span class="line">            n =<span class="number">0</span>;</span><br><span class="line">            <span class="keyword">int</span>[] result = <span class="keyword">new</span> <span class="keyword">int</span>[<span class="number">1000</span>];</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> i =<span class="number">0</span> ;i&lt;<span class="number">1000</span>; i++)&#123;</span><br><span class="line">                result[i] = <span class="number">0</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">while</span>(n &lt; N &amp;&amp; sc.hasNextInt())&#123;</span><br><span class="line">                result[sc.nextInt()] = <span class="number">1</span>;</span><br><span class="line">                n++;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> i =<span class="number">0</span> ;i&lt;<span class="number">1000</span>; i++)&#123;</span><br><span class="line">                <span class="keyword">if</span>(result[i] == <span class="number">1</span>)</span><br><span class="line">                    System.out.println(i);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://haojohnsonlee.github.io/2018/06/30/N-Queen/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Johnson Lee">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="昊江的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/06/30/N-Queen/" itemprop="url">N-Queen</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-06-30T18:42:43+08:00">
                2018-06-30
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Words count in article</span>
                
                <span title="Words count in article">
                  360
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Reading time</span>
                
                <span title="Reading time">
                  2 mins
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="Discribe"><a href="#Discribe" class="headerlink" title="Discribe"></a>Discribe</h3><p>The n-queens puzzle is the problem of placing n queens on an n×n chessboard such that no two queens attack each other.<br><img src="https://leetcode.com/static/images/problemset/8-queens.png" alt="image"><br>Given an integer n, return all distinct solutions to the n-queens puzzle.</p>
<p>Each solution contains a distinct board configuration of the n-queens’ placement, where ‘Q’ and ‘.’ both indicate a queen and an empty space respectively.</p>
<h3 id="Example"><a href="#Example" class="headerlink" title="Example"></a>Example</h3><html><br><pre><strong>Input:</strong> 4<br><strong>Output:</strong> [<br> [“.Q..”,  // Solution 1<br>  “…Q”,<br>  “Q…”,<br>  “..Q.”],<br><br> [“..Q.”,  // Solution 2<br>  “Q…”,<br>  “…Q”,<br>  “.Q..”]<br>]<br><strong>Explanation:</strong> There exist two distinct solutions to the 4-queens puzzle as shown above.<br></pre><br></html>

<h3 id="Solution"><a href="#Solution" class="headerlink" title="Solution"></a>Solution</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> per.johnson.dsa.a.nqueen;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Created by Johnson on 2018/6/30.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">EightQueen</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">int</span> row;  <span class="comment">//当前处理的行</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">boolean</span> error;  <span class="comment">//当前行到结尾 需要回溯</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">palceQueen</span><span class="params">(<span class="keyword">int</span> N)</span> </span>&#123;</span><br><span class="line">        row = <span class="number">0</span>;</span><br><span class="line">        error = <span class="keyword">false</span>;</span><br><span class="line">        <span class="keyword">int</span> count = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span>[] chess = <span class="keyword">new</span> <span class="keyword">int</span>[N];</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; N; i++) chess[i] = -<span class="number">2</span>;</span><br><span class="line">        OUT:</span><br><span class="line">        <span class="keyword">while</span> (chess[<span class="number">0</span>] != -<span class="number">2</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (error) &#123; <span class="comment">//出错</span></span><br><span class="line">                <span class="keyword">while</span> (move(chess, N)) &#123;</span><br><span class="line">                    <span class="keyword">if</span> (confirm(chess)) &#123;</span><br><span class="line">                        error = <span class="keyword">false</span>;</span><br><span class="line">                        <span class="keyword">continue</span> OUT;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123; <span class="comment">//未出错，探测至下一步</span></span><br><span class="line">                chess[++row] = -<span class="number">1</span>;</span><br><span class="line">                <span class="keyword">while</span> (move(chess, N)) &#123;</span><br><span class="line">                    <span class="keyword">if</span> (confirm(chess)) &#123;</span><br><span class="line">                        <span class="keyword">if</span> (row == N - <span class="number">1</span>) &#123; <span class="comment">//找到解</span></span><br><span class="line">                            count++;</span><br><span class="line">                            error = <span class="keyword">true</span>;</span><br><span class="line">                            chess[row--] = -<span class="number">2</span>;</span><br><span class="line">                            <span class="keyword">continue</span> OUT;</span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="keyword">continue</span> OUT;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> count;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">boolean</span> <span class="title">move</span><span class="params">(<span class="keyword">int</span>[] chess, <span class="keyword">int</span> N)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (chess[row] + <span class="number">1</span> == N) &#123;<span class="comment">//到达边界</span></span><br><span class="line">            chess[row] = -<span class="number">2</span>;</span><br><span class="line">            row--;</span><br><span class="line">            error = <span class="keyword">true</span>;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        chess[row]++;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">boolean</span> <span class="title">confirm</span><span class="params">(<span class="keyword">int</span>[] chess)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> col = chess[row];</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; row; i++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (chess[i] == col || (i + chess[i] == row + col) || i - chess[i] == row - col) <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        System.out.println(palceQueen(<span class="number">10</span>));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://haojohnsonlee.github.io/2018/06/27/自由/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Johnson Lee">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="昊江的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/06/27/自由/" itemprop="url">自由</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-06-27T21:46:10+08:00">
                2018-06-27
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Words count in article</span>
                
                <span title="Words count in article">
                  1,556
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Reading time</span>
                
                <span title="Reading time">
                  5 mins
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h4 id="先人的自由观"><a href="#先人的自由观" class="headerlink" title="先人的自由观"></a>先人的自由观</h4><p>庄子说“无己”、道法自然，泯灭自身，融入自然，顺应自然。着眼于自身的修养，物化个体，消灭个体作为生命的思考，这时人与人便都成了道中的一体。在他的眼里，蝴蝶同人是一样的，是在自然框架之下的物，谁是蝴蝶亦不可知。所谓的自由，在他表述下为“真人”，如他所说: </p>
<blockquote>
<p>古之真人，不知说生，不知恶死;其出不訢，其入不距;翛然而往，翛然而来而已矣。不忘其所始，不求其所终;受而喜之，忘而复之。是之谓不以心捐道，不以人助天。是之谓真人。</p>
</blockquote>
<p>“不以人助天”，郭象解释为“真人知用，心则背道，助天则伤生，故不为也”。顺应自然，无为，无所待即是他的自由。他批判了文明的虚伪性，怀疑、猜忌、虚荣、仇恨、背叛等等人的劣根性在文明的裹挟下短暂“消失”，但并没有消除人心中的焦虑不安。自然状态下的人，没有过多的欲望与思考，也就失去了焦虑的源头。舜曾以天下让善卷，善卷自得于逍遥天地之间，日出而作，日落而息，拒绝了舜的禅让。这样的状态便是庄子眼中的自由，保持自然的状态，他在精神上是无比安宁的。  </p>
<p>邓晓芒在《康德自由概念的三个层次》中将康德的自由观划分为“先验的自由” 、“ 实践的自由”和“ 自由感” 三个层次。</p>
<ol>
<li>在机械因果律中永远需要追溯更早的原因，每个事件的发生必然需要去追溯更早的事件。但这无法解释这个世界的的现实存在的理由，是什么让这个世界产生？世界的源头又是什么?由此，必须假定一个自发的，它本身的发生并不取决于其他任何元素，这种意义上来说，此事件是自由的。这样不妨假定世界上存在各种时间序列上自发发生的，它们有着自由行动的能力，不取决于任何事物。它提供了一个可归咎性的依据，并不违反因果律，仅仅是为其提供了因果过程的开端。此种自由的内涵一方面在于人们摆脱感性认识，以及一切因果律的约束的消极的自由；;另一方面它意味着自行开始一个因果系列的原因性, 这是积极意义上的自由。这两方面的内容实际上也正是一般实践的自由的内容,所以康德说:“值得特别注意的是,以这个自由的先验理念为根据的是自由的实践概念”。</li>
<li>实践的自由本身也分为两个层次,即“自由的任意”和“自由意志”。<br>在我看来自由的任意是感性的，也是朴素的自由，与庄子“无己”不一致的是其强调人的主观性。之所以说它是朴素的自由，是因为它在人性的基础上，突出了人的感性认识对其行动的决定力，其是无法预计的。当人能够独立于感性认识去规定自己，也就达到了自由的任意，此时其已然具有理性的实践的影子。<br>意志与任意并非两个独立的概念，它们都属于人的欲求领域。自由的任意并没有摆脱感性的个人经验主义，虽然已然发展出了理性的观念，但其并没有完全摆脱感性认识，此时的理性是为了某个欲求或利益服务，并不是真正自由的。自由意志是极为理性的，只有完全摆脱了感性的裹挟，使理性本身具有了超越一切感性欲求之上的尊严，才能获得一贯的自由。</li>
<li>康德认为,自由作为人的本体不可能是感性的,而在反思判断力中所出现的情感领域中的“自由”正因为是由“反思”带出来的。我们在感受自由的过程中反思自己的自由主体，从而唤起进一步对自由追寻的热忱，是人理性反思的正反馈过程。看起来这是人的感性认识，但其确是人在感受自己内心的道德价值进行的理性思考做出的动物性表现，建立在先验的自由和实践的自由之上的外在表现。  </li>
</ol>
<p>谈到胡适对于自由的追寻耐人寻味。胡适先生在<a href="http://47.93.198.51/temp/%E5%AE%B9%E5%BF%8D%E4%B8%8E%E8%87%AA%E7%94%B1_%E8%83%A1%E9%80%82.pdf" target="_blank" rel="noopener">容忍与自由</a>中提到，真正的自由来自于容忍。一切对异端的排斥，迫害都来自于深信自己的理念的准确性，而对其他想法行为表现出极度不容忍了。从历史的角度上来看，统治阶级排斥异端，排斥其他于统治不利思想，被统治者打着自由的旗号推翻统治者之后往往又会走上不自由的老路。教皇打着上帝的权威来统治人民，上帝是不会犯错的，一切反对者、异己者都是魔鬼的教条了，一切不容忍根源在于“我不会错”的理念。从科学的角度上来说，怀疑是学术发展的强大动力；从个人意志角度上来说，不断地自我怀疑，接纳新思想、新理念是个人思想进步地源泉。在这方面看来，容忍确实能够给自由带来土壤。<br>这样的容忍，建立在个人独立思考的自由精神之上，而不是把别人的眼睛当眼睛，把别人的耳朵当耳朵，把别人的脑子当脑子。同时，不迷信权威，不断自我怀疑，以存疑的眼光、批判的态度去评估新的想法。</p>
<h4 id="我的自由观"><a href="#我的自由观" class="headerlink" title="我的自由观"></a>我的自由观</h4><p>小子我也不知道，也在探索。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://haojohnsonlee.github.io/2018/06/21/是啊，要毕业了/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Johnson Lee">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="昊江的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/06/21/是啊，要毕业了/" itemprop="url">是啊，要毕业了</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-06-21T22:09:35+08:00">
                2018-06-21
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Words count in article</span>
                
                <span title="Words count in article">
                  208
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Reading time</span>
                
                <span title="Reading time">
                  1 mins
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="时间就这么没了"><a href="#时间就这么没了" class="headerlink" title="时间就这么没了"></a>时间就这么没了</h3><p>今天学院毕业典礼，作为”摄影师”帮忙给学长学姐们拍照留念，看着台上的他们，想着明年的自己也能穿上学士服，走向另一个开始，激动的感觉溢于言表。回想起珞珈山上的三年时光，干了不少事儿，也不后悔，虽说浪费不少时间，但是也没有空虚的感觉，也不想总结什么，就这样吧。最后响起校歌的旋律，真好听，希望我离开珞珈山的时候，是个意气风发的少年，若干年回来的时候也可以自信满满。  </p>
<h3 id="FLAG"><a href="#FLAG" class="headerlink" title="FLAG"></a>FLAG</h3><p>今天有点累了，脑子里想得很多，但是没力气写下来了。<br>希望下次可以做完操作系统的一个实验吧。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://haojohnsonlee.github.io/2018/06/07/设计模式-抽象工厂模式/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Johnson Lee">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="昊江的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/06/07/设计模式-抽象工厂模式/" itemprop="url">设计模式-抽象工厂模式</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-06-07T19:17:58+08:00">
                2018-06-07
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Words count in article</span>
                
                <span title="Words count in article">
                  969
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Reading time</span>
                
                <span title="Reading time">
                  4 mins
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="介绍及使用动机"><a href="#介绍及使用动机" class="headerlink" title="介绍及使用动机"></a>介绍及使用动机</h3><p>我们使用软件的时候，界面不可能只有一种风格，有时候需要呆萌风格，有时候需要炫酷风格。这就对设计界面时提出了新的要求，不能在编写界面时将其硬编码而导致后期无法改动。此设计模式就是致力于提供一系列相关或互相依赖的接口，而不需指定他们具体的类。</p>
<h3 id="引入"><a href="#引入" class="headerlink" title="引入"></a>引入</h3><p>现在我们需要制作一个有两种界面风格的的软件分别为<em>Motif</em>和<em>Presentation Manager</em>，两者具有不同的窗体与滚动条风格。因为要让客户端可以根据需要创建不同的界面风格，所以我们应该引入<em>WidgetFactory</em>接口屏蔽下层实现。</p>
<h4 id="Window-java-amp-ScrollBar-java"><a href="#Window-java-amp-ScrollBar-java" class="headerlink" title="Window.java &amp; ScrollBar.java"></a>Window.java &amp; ScrollBar.java</h4><p>窗体与滚动条对象<br>两个业务对象提供了基本的操作方法:show()、roll()<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">Window</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">show</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">ScrollBar</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">roll</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h4 id="WidgetFactory-java"><a href="#WidgetFactory-java" class="headerlink" title="WidgetFactory.java"></a>WidgetFactory.java</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">WidgetFactory</span> </span>&#123;</span><br><span class="line">    <span class="function">ScrollBar <span class="title">createScrollBar</span><span class="params">()</span></span>;</span><br><span class="line">    <span class="function">Window <span class="title">createWindow</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>可以看到，此接口提供了创建窗体和滚动条的方法,客户端只要存在该接口就能实现创建窗体和滚动条。具体对象的创建延迟到了WidgetFactory的子类进行。</p>
<h3 id="具体的业务对象"><a href="#具体的业务对象" class="headerlink" title="具体的业务对象"></a>具体的业务对象</h3><h4 id="PMWindow-java"><a href="#PMWindow-java" class="headerlink" title="PMWindow.java"></a>PMWindow.java</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">PMWindow</span> <span class="keyword">implements</span> <span class="title">Window</span></span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">show</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"PMWindow show"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="MotifWindow-java"><a href="#MotifWindow-java" class="headerlink" title="MotifWindow.java"></a>MotifWindow.java</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MotifWindow</span> <span class="keyword">implements</span> <span class="title">Window</span></span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">show</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"MotifWindow show"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="PMScrollBar-java"><a href="#PMScrollBar-java" class="headerlink" title="PMScrollBar.java"></a>PMScrollBar.java</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">PMScrollBar</span> <span class="keyword">implements</span> <span class="title">ScrollBar</span></span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">roll</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"PMScrollBar rolling"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="MotifScrollBar-java"><a href="#MotifScrollBar-java" class="headerlink" title="MotifScrollBar.java"></a>MotifScrollBar.java</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MotifScrollBar</span> <span class="keyword">implements</span> <span class="title">ScrollBar</span></span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">roll</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"MotifScrollBar rolling"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>这四个对象分别对应着<em>Motif</em>与<em>Presentation Manager</em>风格的窗体和滚动条的具体实现，在Client中具体的实现由<em>WidgetFactory</em>决定。<br>于是Client由这几部分构成：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Client</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> Window window;</span><br><span class="line">    <span class="keyword">private</span> ScrollBar scrollBar;</span><br><span class="line">    <span class="keyword">private</span> WidgetFactory widgetFactory;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Client</span><span class="params">(WidgetFactory widgetFactory)</span></span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.widgetFactory = widgetFactory;</span><br><span class="line">        <span class="keyword">this</span>.window = widgetFactory.createWindow();</span><br><span class="line">        <span class="keyword">this</span>.scrollBar = widgetFactory.createScrollBar();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span></span>&#123;</span><br><span class="line">        window.show();</span><br><span class="line">        scrollBar.roll();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>Client包含抽象的<em>WidgetFactory</em>，其窗口与滚动条成员的创建在<em>WidgetFactory</em>的子类完成,所以关键之处在于构造函数中传入的<em>WidgetFactory</em>对象是哪一种窗体风格的实现。</p>
<h3 id="具体的工厂"><a href="#具体的工厂" class="headerlink" title="具体的工厂"></a>具体的工厂</h3><h4 id="MotifWidgetFactory-java"><a href="#MotifWidgetFactory-java" class="headerlink" title="MotifWidgetFactory.java"></a>MotifWidgetFactory.java</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MotifWidgetFactory</span> <span class="keyword">implements</span> <span class="title">WidgetFactory</span></span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> ScrollBar <span class="title">createScrollBar</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"createScrollBar in MotifWidgetFactory"</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> MotifScrollBar();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Window <span class="title">createWindow</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"createWindow in MotifWidgetFactory"</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> MotifWindow();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="PMWidgetFactory-java"><a href="#PMWidgetFactory-java" class="headerlink" title="PMWidgetFactory.java"></a>PMWidgetFactory.java</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">PMWidgetFactory</span> <span class="keyword">implements</span> <span class="title">WidgetFactory</span></span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> ScrollBar <span class="title">createScrollBar</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"createScrollBar in PMWidgetFactory"</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> PMScrollBar();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Window <span class="title">createWindow</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"createWindow in PMWidgetFactory"</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> PMWindow();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>两者负责不同的窗体滚动条的创建过程。</p>
<h3 id="测试"><a href="#测试" class="headerlink" title="测试"></a>测试</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Client client = <span class="keyword">new</span> Client(<span class="keyword">new</span> PMWidgetFactory());</span><br><span class="line">        client.run();</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<p>这里指定的是<em>Presentation Manager</em>风格的窗体<br>运行结果:</p>
<blockquote>
<p>createWindow in PMWidgetFactory<br>createScrollBar in PMWidgetFactory<br>PMWindow show<br>PMScrollBar rolling  </p>
</blockquote>
<p>可以看到，只通过指定客户端创建时传入的不同工厂方法的实现，便可以控制整个界面的风格。而无需将风格硬编码到客户端中。  </p>
<h4 id="类图"><a href="#类图" class="headerlink" title="类图"></a>类图</h4><p><img src="http://47.93.198.51/temp/abstract_factory.jpg" alt="image"></p>
<h3 id="小结"><a href="#小结" class="headerlink" title="小结"></a>小结</h3><h4 id="优点"><a href="#优点" class="headerlink" title="优点"></a>优点</h4><ol>
<li>分离了具体的类<br>Abstract Factory模式实现客户端与服务的分离，客户端通过操作抽象接口操纵实例，不关心下层实现。</li>
<li>易于更换服务<br>一个具体应用中，只需要在初始化时指定需要的服务，所以一旦需要改变整个生产线的服务源时，只需要初始化时改变制定源。</li>
<li>有利于产品的一致性<br>当一个系列的产品设计成一起工作时，更换其中一个产品，一系列产品将同步更新。  </li>
</ol>
<h4 id="缺点"><a href="#缺点" class="headerlink" title="缺点"></a>缺点</h4><p>难以支持新种类的产品，当产品基类需要添加新功能时，所有的子类必须同步添加。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://haojohnsonlee.github.io/2018/06/07/爬虫-bs入门/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Johnson Lee">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="昊江的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/06/07/爬虫-bs入门/" itemprop="url">爬虫-bs入门</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-06-07T14:19:07+08:00">
                2018-06-07
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Words count in article</span>
                
                <span title="Words count in article">
                  25
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Reading time</span>
                
                <span title="Reading time">
                  1 mins
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="爬虫简介"><a href="#爬虫简介" class="headerlink" title="爬虫简介"></a>爬虫简介</h3><p>爬虫通常被称为Spider，是一种不断运行在网络上获取信息并保存分析的一类程序。<br>爬虫按照预期功能的不同，实现的方式同样大有不同，由于前些天接触到了一个数据搜集任务，故记录下来这次使用的工具。</p>
<h4 id="爬虫工作流"><a href="#爬虫工作流" class="headerlink" title="爬虫工作流"></a>爬虫工作流</h4><p>从爬虫的功能及目的来看，要获取数据，得到数据之后按照自定义的方式保存下来。简单来说就是:</p>
<ol>
<li>发送Http请求</li>
<li>接收数据，根据不同的格式去解析数据使之可读</li>
<li>解析可读文档，提取有效信息</li>
<li>持久化到硬盘<h4 id="Python中的爬虫"><a href="#Python中的爬虫" class="headerlink" title="Python中的爬虫"></a>Python中的爬虫</h4>使用Python这样能快速构建程序的语言对于小型爬虫任务十分适合，并且有大量的库来支持。  </li>
</ol>
<ul>
<li>python中的 ~urllib~ 库支持所有HTTP请求，能够对请求的参数方式进行高度的定制。</li>
<li>得到并解码数据之后，便需要今天的主角<strong>BeautifulSoup</strong>来对结构化的文档进行解析。</li>
<li>将有效数据持久化。可以使用文本、数据库或者此次的Excel方式。</li>
</ul>
<h3 id="BeautifulSoup-简介"><a href="#BeautifulSoup-简介" class="headerlink" title="BeautifulSoup 简介"></a>BeautifulSoup 简介</h3><blockquote>
<p>Beautiful Soup提供一些简单的、python式的函数用来处理导航、搜索、修改分析树等功能。它是一个工具箱，通过解析文档为用户提供需要抓取的数据，因为简单，所以不需要多少代码就可以写出一个完整的应用程序。<br>Beautiful Soup自动将输入文档转换为Unicode编码，输出文档转换为utf-8编码。你不需要考虑编码方式，除非文档没有指定一个编码方式，这时，Beautiful Soup就不能自动识别编码方式了。然后，你仅仅需要说明一下原始编码方式就可以了。<br>Beautiful Soup已成为和lxml、html6lib一样出色的python解释器，为用户灵活地提供不同的解析策略或强劲的速度。</p>
</blockquote>
<p>此处只介绍最关键的方法，<a href="http://beautifulsoup.readthedocs.io/zh_CN/v4.4.0/" target="_blank" rel="noopener">这里</a>是它的详细操作文档。</p>
<h4 id="基本结构"><a href="#基本结构" class="headerlink" title="基本结构"></a>基本结构</h4><p><strong>BeautifulSoup</strong>将网页视作由一个一个的<em>TAG</em>所组成，你可以通过遍历和搜索的方式找到一个文档中的所有<em>TAG</em>，在<em>TAG</em>中有你需要的全部信息。<br>以这样一段HTML内容作为例子<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">title</span>&gt;</span>The Dormouse's story<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">"title"</span>&gt;</span><span class="tag">&lt;<span class="name">b</span>&gt;</span>The Dormouse's story<span class="tag">&lt;/<span class="name">b</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">"story"</span>&gt;</span>Once upon a time there were three little sisters; and their names were</span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"http://example.com/elsie"</span> <span class="attr">class</span>=<span class="string">"sister"</span> <span class="attr">id</span>=<span class="string">"link1"</span>&gt;</span>Elsie<span class="tag">&lt;/<span class="name">a</span>&gt;</span>,</span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"http://example.com/lacie"</span> <span class="attr">class</span>=<span class="string">"sister"</span> <span class="attr">id</span>=<span class="string">"link2"</span>&gt;</span>Lacie<span class="tag">&lt;/<span class="name">a</span>&gt;</span> and</span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"http://example.com/tillie"</span> <span class="attr">class</span>=<span class="string">"sister"</span> <span class="attr">id</span>=<span class="string">"link3"</span>&gt;</span>Tillie<span class="tag">&lt;/<span class="name">a</span>&gt;</span>;</span><br><span class="line">and they lived at the bottom of a well.<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">"story"</span>&gt;</span>...<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<h4 id="遍历方式"><a href="#遍历方式" class="headerlink" title="遍历方式"></a>遍历方式</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> bs4 <span class="keyword">import</span> BeautifulSoup</span><br><span class="line">soup = BeautifulSoup(html_content)</span><br></pre></td></tr></table></figure>
<p>以上 ~soup~ 变量代表着整个文档的根<em>TAG</em>,你可以通过：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">head = soup.head</span><br><span class="line"># &lt;head&gt;&lt;title&gt;The Dormouse&apos;s story&lt;/title&gt;&lt;/head&gt;</span><br><span class="line">body_b = soup.body.b</span><br><span class="line"># &lt;b&gt;The Dormouse&apos;s story&lt;/b&gt;</span><br><span class="line"></span><br><span class="line">root = head.parent</span><br><span class="line"># parent指向当前节点的父节点，也就是说root与soup对象指向同一处内容</span><br></pre></td></tr></table></figure></p>
<p>两次遍历得到了根下标签<head>与<b>。<br>你也可以通过:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">body_contents = soup.body.contents</span><br></pre></td></tr></table></figure></b></head></p>
<p>来获取<body>下所有的标签，通过循环遍历每一个标签获取标签内的信息。</body></p>
<h4 id="搜索方式"><a href="#搜索方式" class="headerlink" title="搜索方式"></a>搜索方式</h4><h5 id="find-all-方法"><a href="#find-all-方法" class="headerlink" title="find_all()方法"></a>find_all()方法</h5><ul>
<li><p>基础使用方法</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># 查询根节点下所有标签p</span><br><span class="line">ts = soup.find_all(&apos;p&apos;)</span><br></pre></td></tr></table></figure>
</li>
<li><p>正则表达式</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># 查询根节点下所有标签所有以b开头的标签&lt;body&gt;or&lt;b&gt;</span><br><span class="line">ts = soup.find_all(re.compile(&quot;^b&quot;))</span><br></pre></td></tr></table></figure>
</li>
<li><p>标签列表查找</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># 查询根节点下所有标签 p 与 b</span><br><span class="line">ts = soup.find_all([&apos;p&apos;,&apos;b&apos;])</span><br></pre></td></tr></table></figure>
</li>
<li><p>keyword查找<br>这种模式下，你可以根据标签的Attributes查找符合的标签，同样的，keyword支持正则表达式</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># 查找所有href值为http://www.ex.com的标签</span><br><span class="line">ts = soup.find_all(href=&apos;http://www.ex.com&apos;)</span><br><span class="line"># 查找所有href值为以johnson开头的标签</span><br><span class="line">ts0 = soup.find_all(href=re.compile(&quot;^johnson&quot;))</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h5 id="find-方法"><a href="#find-方法" class="headerlink" title="find()方法"></a>find()方法</h5><p>相对于find_all()，find()更为精确，当查找的对象只有一个结果时，find()返回的是一个TAG对象，而不是一个只含一个TAG对象的列表。</p>
<ul>
<li>属性查找<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># 查找所有class值为exp的p节点</span><br><span class="line">info_tag = soup.find(&apos;p&apos;, attrs=&#123;&apos;class&apos;: &apos;exp&apos;&#125;)</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="实践"><a href="#实践" class="headerlink" title="实践"></a>实践</h3><p>我们爬取的baseurl是<a href="http://esf.wuhan.fang.com/integrate/i31/，我们需要的是首页面所有的房屋基础信息。" target="_blank" rel="noopener">http://esf.wuhan.fang.com/integrate/i31/，我们需要的是首页面所有的房屋基础信息。</a></p>
<h4 id="实践步骤"><a href="#实践步骤" class="headerlink" title="实践步骤"></a>实践步骤</h4><ol>
<li>先进入该网站的<a href="http://esf.wuhan.fang.com/robots.txt" target="_blank" rel="noopener"><em>robots.txt</em></a>文件查看网站对爬虫的宽容度。<br>注意到该网站对于我们需要爬取的页面来说没有作任何限制,没有Disallow也不需要Delay。  </li>
<li>查看浏览器访问该网站的response header<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">HTTP/1.1 200 OK</span><br><span class="line">Server: nginx</span><br><span class="line">Date: Thu, 07 Jun 2018 07:08:37 GMT</span><br><span class="line">Content-Type: text/html; charset=gb2312</span><br><span class="line">Transfer-Encoding: chunked</span><br><span class="line">Connection: keep-alive</span><br><span class="line">Vary: Accept-Encoding</span><br><span class="line">Cache-Control: no-cache, no-store</span><br><span class="line">Pragma: no-cache</span><br><span class="line">Expires: -1</span><br><span class="line">X-AspNet-Version: 4.0.30319</span><br><span class="line">X-Powered-By: ASP.NET</span><br><span class="line">X-Cache: from dzc-wn-dmzys01.light.soufun.com</span><br><span class="line">Content-Encoding: gzip</span><br><span class="line">X-Cache:  from dzc-wn-dmzhc04.light.soufun.com</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p>我们可以了解到返回内容(Content-Encoding)为gzip类型，意味着我们获取得页面经过了gzip方式压缩，我们在处理文本时必须进行解压。同时文本文档的编码方式为gb2312,我们同样需要对编码格式进行进一步处理。</p>
<ol start="3">
<li><p>构建url<br>我们需要连续获取100个页面的信息，先构建出这些页面的列表</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">url_finder</span><span class="params">()</span>:</span></span><br><span class="line">    n = <span class="number">1</span></span><br><span class="line">    f_url = <span class="string">'http://esf.wuhan.fang.com/integrate/i3&#123;0&#125;/\n'</span></span><br><span class="line">    f_urls = []</span><br><span class="line">    <span class="keyword">while</span> n &lt; <span class="number">101</span>:</span><br><span class="line">        temp = f_url.format(n)</span><br><span class="line">        n += <span class="number">1</span></span><br><span class="line">        f_urls.append(temp)</span><br><span class="line">    <span class="keyword">return</span> f_urls</span><br></pre></td></tr></table></figure>
</li>
<li><p>发起请求并获取信息对其解压编码</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">content_getter</span><span class="params">(html_location)</span>:</span></span><br><span class="line">    req = request.Request(html_location)</span><br><span class="line">    <span class="keyword">with</span> request.urlopen(req) <span class="keyword">as</span> resp:</span><br><span class="line">        compressed_data = resp.read()</span><br><span class="line">        compressed_stream = io.BytesIO(compressed_data)</span><br><span class="line">        gziper = gzip.GzipFile(fileobj=compressed_stream)</span><br><span class="line">        <span class="comment">#gbk编码是对gb2312的扩充，这里使用gb2312的超集亦可。</span></span><br><span class="line">        <span class="comment">#同时gb2312对该网页包含的字符/u30fb支持有问题</span></span><br><span class="line">        <span class="keyword">return</span> str(gziper.read(), encoding=<span class="string">"gbk"</span>)</span><br></pre></td></tr></table></figure>
</li>
<li><p>解析获取需要的数据</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">parse_main</span><span class="params">(list_content)</span>:</span></span><br><span class="line">    houses = []</span><br><span class="line">    soup = BeautifulSoup(list_content)</span><br><span class="line">    h_list = soup.find_all(<span class="string">'dd'</span>, attrs=&#123;<span class="string">'class'</span>: <span class="string">"info rel floatr"</span>&#125;)</span><br><span class="line">    <span class="keyword">for</span> single_house <span class="keyword">in</span> h_list:</span><br><span class="line">        <span class="comment"># 房产title</span></span><br><span class="line">        h_title = single_house.a[<span class="string">"title"</span>]</span><br><span class="line">        location_tag = single_house.find(<span class="string">'p'</span>, attrs=&#123;<span class="string">'class'</span>: <span class="string">'mt10'</span>&#125;)</span><br><span class="line">        location_spans = location_tag.find_all(<span class="string">'span'</span>)</span><br><span class="line">        <span class="comment"># 房产位置</span></span><br><span class="line">        h_location = <span class="string">""</span></span><br><span class="line">        <span class="keyword">for</span> span <span class="keyword">in</span> location_spans:</span><br><span class="line">            h_location += span.string</span><br><span class="line">        <span class="comment"># 房产具体属性</span></span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            info_tag = single_house.find(<span class="string">'p'</span>, attrs=&#123;<span class="string">'class'</span>: <span class="string">'mt12'</span>&#125;)</span><br><span class="line">            h_type = info_tag.contents[<span class="number">0</span>].strip()</span><br><span class="line">            h_floor = info_tag.contents[<span class="number">2</span>].strip()</span><br><span class="line">            h_forward = info_tag.contents[<span class="number">4</span>].strip()</span><br><span class="line">            h_year = info_tag.contents[<span class="number">6</span>].strip()[<span class="number">-4</span>:]</span><br><span class="line">            h_area = single_house.find(<span class="string">'div'</span>, attrs=&#123;<span class="string">'class'</span>: <span class="string">'area alignR'</span>&#125;).p.string</span><br><span class="line">            money_tag = single_house.find(<span class="string">'div'</span>, attrs=&#123;<span class="string">'class'</span>: <span class="string">'moreInfo'</span>&#125;)</span><br><span class="line">            h_total = money_tag.find(<span class="string">'span'</span>, attrs=&#123;<span class="string">'class'</span>: <span class="string">'price'</span>&#125;).string + <span class="string">"万"</span></span><br><span class="line">            h_price = money_tag.find(<span class="string">'p'</span>, attrs=&#123;<span class="string">'class'</span>: <span class="string">'danjia alignR mt5'</span>&#125;).contents[<span class="number">0</span>] + <span class="string">"/㎡"</span></span><br><span class="line">            houses.append(House(h_title, h_type, h_area, h_price, h_total, h_forward, h_floor, h_location, h_year))</span><br><span class="line">        <span class="keyword">except</span> IndexError:</span><br><span class="line">            <span class="keyword">continue</span></span><br><span class="line">    <span class="keyword">return</span> houses</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p>6.持久化数据<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">write2excel</span><span class="params">(houses, filename=<span class="string">"房屋数据.xlsx"</span>, sheet_name=<span class="string">"Index"</span>)</span>:</span></span><br><span class="line">    wb = openpyxl.Workbook()</span><br><span class="line">    sheet = wb.active</span><br><span class="line">    sheet.title = sheet_name</span><br><span class="line">    <span class="keyword">for</span> index <span class="keyword">in</span> range(len(House.sheet_names)):</span><br><span class="line">        sheet.cell(row=<span class="number">1</span>, column=index + <span class="number">1</span>, value=House.sheet_names[index])</span><br><span class="line">    <span class="keyword">for</span> hi <span class="keyword">in</span> range(len(houses)):</span><br><span class="line">        hs = houses[hi]</span><br><span class="line">        hs.save(sheet, hi)</span><br><span class="line">    wb.save(filename)</span><br></pre></td></tr></table></figure></p>
<h4 id="完整代码"><a href="#完整代码" class="headerlink" title="完整代码"></a>完整代码</h4><h5 id="spider-py"><a href="#spider-py" class="headerlink" title="spider.py"></a>spider.py</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> entity.house <span class="keyword">import</span> House</span><br><span class="line"><span class="keyword">from</span> urllib <span class="keyword">import</span> request</span><br><span class="line"><span class="keyword">from</span> bs4 <span class="keyword">import</span> BeautifulSoup</span><br><span class="line"><span class="keyword">import</span> gzip</span><br><span class="line"><span class="keyword">import</span> io</span><br><span class="line"><span class="keyword">import</span> openpyxl</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">content_getter</span><span class="params">(html_location)</span>:</span></span><br><span class="line">    req = request.Request(html_location)</span><br><span class="line">    <span class="keyword">with</span> request.urlopen(req) <span class="keyword">as</span> resp:</span><br><span class="line">        compressed_data = resp.read()</span><br><span class="line">        compressed_stream = io.BytesIO(compressed_data)</span><br><span class="line">        gziper = gzip.GzipFile(fileobj=compressed_stream)</span><br><span class="line">        <span class="keyword">return</span> str(gziper.read(), encoding=<span class="string">"gbk"</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="string">def parse_list(content):</span></span><br><span class="line"><span class="string">    soup = BeautifulSoup(content)</span></span><br><span class="line"><span class="string">    h_list = soup.find('div', attrs=&#123;'class': "houseList"&#125;).find_all('a')</span></span><br><span class="line"><span class="string">    for single in h_list:</span></span><br><span class="line"><span class="string">        print(single.href)</span></span><br><span class="line"><span class="string">'''</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">parse_main</span><span class="params">(list_content)</span>:</span></span><br><span class="line">    houses = []</span><br><span class="line">    soup = BeautifulSoup(list_content)</span><br><span class="line">    h_list = soup.find_all(<span class="string">'dd'</span>, attrs=&#123;<span class="string">'class'</span>: <span class="string">"info rel floatr"</span>&#125;)</span><br><span class="line">    <span class="keyword">for</span> single_house <span class="keyword">in</span> h_list:</span><br><span class="line">        <span class="comment"># 房产title</span></span><br><span class="line">        h_title = single_house.a[<span class="string">"title"</span>]</span><br><span class="line">        location_tag = single_house.find(<span class="string">'p'</span>, attrs=&#123;<span class="string">'class'</span>: <span class="string">'mt10'</span>&#125;)</span><br><span class="line">        location_spans = location_tag.find_all(<span class="string">'span'</span>)</span><br><span class="line">        <span class="comment"># 房产位置</span></span><br><span class="line">        h_location = <span class="string">""</span></span><br><span class="line">        <span class="keyword">for</span> span <span class="keyword">in</span> location_spans:</span><br><span class="line">            h_location += span.string</span><br><span class="line">        <span class="comment"># 房产具体属性</span></span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            info_tag = single_house.find(<span class="string">'p'</span>, attrs=&#123;<span class="string">'class'</span>: <span class="string">'mt12'</span>&#125;)</span><br><span class="line">            h_type = info_tag.contents[<span class="number">0</span>].strip()</span><br><span class="line">            h_floor = info_tag.contents[<span class="number">2</span>].strip()</span><br><span class="line">            h_forward = info_tag.contents[<span class="number">4</span>].strip()</span><br><span class="line">            h_year = info_tag.contents[<span class="number">6</span>].strip()[<span class="number">-4</span>:]</span><br><span class="line">            h_area = single_house.find(<span class="string">'div'</span>, attrs=&#123;<span class="string">'class'</span>: <span class="string">'area alignR'</span>&#125;).p.string</span><br><span class="line">            money_tag = single_house.find(<span class="string">'div'</span>, attrs=&#123;<span class="string">'class'</span>: <span class="string">'moreInfo'</span>&#125;)</span><br><span class="line">            h_total = money_tag.find(<span class="string">'span'</span>, attrs=&#123;<span class="string">'class'</span>: <span class="string">'price'</span>&#125;).string + <span class="string">"万"</span></span><br><span class="line">            h_price = money_tag.find(<span class="string">'p'</span>, attrs=&#123;<span class="string">'class'</span>: <span class="string">'danjia alignR mt5'</span>&#125;).contents[<span class="number">0</span>] + <span class="string">"/㎡"</span></span><br><span class="line">            houses.append(House(h_title, h_type, h_area, h_price, h_total, h_forward, h_floor, h_location, h_year))</span><br><span class="line">        <span class="keyword">except</span> IndexError:</span><br><span class="line">            <span class="keyword">continue</span></span><br><span class="line">    <span class="keyword">return</span> houses</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">url_finder</span><span class="params">()</span>:</span></span><br><span class="line">    n = <span class="number">1</span></span><br><span class="line">    f_url = <span class="string">'http://esf.wuhan.fang.com/integrate/i3&#123;0&#125;/\n'</span></span><br><span class="line">    f_urls = []</span><br><span class="line">    <span class="keyword">while</span> n &lt; <span class="number">101</span>:</span><br><span class="line">        temp = f_url.format(n)</span><br><span class="line">        n += <span class="number">1</span></span><br><span class="line">        f_urls.append(temp)</span><br><span class="line">    <span class="keyword">return</span> f_urls</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">write2excel</span><span class="params">(houses, filename=<span class="string">"房屋数据.xlsx"</span>, sheet_name=<span class="string">"Index"</span>)</span>:</span></span><br><span class="line">    wb = openpyxl.Workbook()</span><br><span class="line">    sheet = wb.active</span><br><span class="line">    sheet.title = sheet_name</span><br><span class="line">    <span class="keyword">for</span> index <span class="keyword">in</span> range(len(House.sheet_names)):</span><br><span class="line">        sheet.cell(row=<span class="number">1</span>, column=index + <span class="number">1</span>, value=House.sheet_names[index])</span><br><span class="line">    <span class="keyword">for</span> hi <span class="keyword">in</span> range(len(houses)):</span><br><span class="line">        hs = houses[hi]</span><br><span class="line">        hs.save(sheet, hi)</span><br><span class="line">    wb.save(filename)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    <span class="comment"># base_url = "http://esf.wuhan.fang.com"</span></span><br><span class="line">    content = content_getter(<span class="string">"http://esf.wuhan.fang.com/integrate/i31/"</span>)</span><br><span class="line">    urls = url_finder()</span><br><span class="line">    all_houses = []</span><br><span class="line">    <span class="keyword">for</span> url <span class="keyword">in</span> urls:</span><br><span class="line">        cur = parse_main(content_getter(url))</span><br><span class="line">        print(len(cur))</span><br><span class="line">        all_houses.extend(cur)</span><br><span class="line">    write2excel(all_houses)</span><br><span class="line">    <span class="comment"># print("OK")</span></span><br></pre></td></tr></table></figure>
<h5 id="house-py"><a href="#house-py" class="headerlink" title="house.py"></a>house.py</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">class House:</span><br><span class="line">    sheet_names = [&apos;标题&apos;, &apos;类型&apos;, &apos;面积&apos;, &apos;单价&apos;, &apos;总价&apos;, &apos;朝向&apos;, &apos;层高&apos;, &apos;位置&apos;, &apos;建筑年份&apos;]</span><br><span class="line"></span><br><span class="line">    def __init__(self, h_title=&quot;title&quot;, h_type=&quot;type&quot;, h_area=&quot;area&quot;, h_price=&quot;price&quot;, h_total=&quot;total&quot;,</span><br><span class="line">                 h_forward=&quot;forward&quot;, h_floor=&quot;floor&quot;, h_location=&quot;location&quot;, h_year=&quot;year&quot;):</span><br><span class="line">        self.h_title = h_title</span><br><span class="line">        self.h_type = h_type</span><br><span class="line">        self.h_area = h_area</span><br><span class="line">        self.h_price = h_price</span><br><span class="line">        self.h_total = h_total</span><br><span class="line">        self.h_forward = h_forward</span><br><span class="line">        self.h_floor = h_floor</span><br><span class="line">        self.h_location = h_location</span><br><span class="line">        self.h_year = h_year</span><br><span class="line"></span><br><span class="line">    def save(self, sheet, hi):</span><br><span class="line">        sheet.cell(row=hi + 2, column=1, value=self.h_title)</span><br><span class="line">        sheet.cell(row=hi + 2, column=2, value=self.h_type)</span><br><span class="line">        sheet.cell(row=hi + 2, column=3, value=self.h_area)</span><br><span class="line">        sheet.cell(row=hi + 2, column=4, value=self.h_price)</span><br><span class="line">        sheet.cell(row=hi + 2, column=5, value=self.h_total)</span><br><span class="line">        sheet.cell(row=hi + 2, column=6, value=self.h_forward)</span><br><span class="line">        sheet.cell(row=hi + 2, column=7, value=self.h_floor)</span><br><span class="line">        sheet.cell(row=hi + 2, column=8, value=self.h_location)</span><br><span class="line">        sheet.cell(row=hi + 2, column=9, value=self.h_year)</span><br></pre></td></tr></table></figure>
<h3 id="结果"><a href="#结果" class="headerlink" title="结果"></a>结果</h3><p><img src="http://47.93.198.51/temp/16-12__house_result.jpg" alt="image"><br>你可以在<a href="http://47.93.198.51/temp/16-12__house_result.rar" target="_blank" rel="noopener">这里</a>获得全部的文件。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://haojohnsonlee.github.io/2018/06/03/算法-二叉树/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Johnson Lee">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="昊江的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/06/03/算法-二叉树/" itemprop="url">算法-二叉树.1</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-06-03T12:17:18+08:00">
                2018-06-03
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Words count in article</span>
                
                <span title="Words count in article">
                  523
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Reading time</span>
                
                <span title="Reading time">
                  2 mins
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="二叉树"><a href="#二叉树" class="headerlink" title="二叉树"></a>二叉树</h3><p>树结构存在是为了平衡CRUD操作效率的一种半线性结构的数据结构(与图、向量相比)。而二叉树是树的一种特例，有趣的是，在一般条件下，可证明二叉树可等效代替所有的树结构，所以树结构用二叉树实现来代替。</p>
<h3 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h3><p>树结构同样由一个个的节点构成，节点保存三个父子指针连接。</p>
<h4 id="BinaryTree-h"><a href="#BinaryTree-h" class="headerlink" title="BinaryTree.h"></a>BinaryTree.h</h4><p>定义了二叉树节点的结构以及基本操作<br><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">pragma</span> once</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> BinNodePosi(T) BinNode<span class="meta-string">&lt;T&gt;* //节点位置</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> stature(p) ((p) ? (p)-&gt;height : -1) <span class="comment">//节点高度（与“空树高度为-1”的约定相统一）</span></span></span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">enum</span> &#123; RB_RED, RB_BLACK&#125; RBColor; <span class="comment">//节点颜色</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt; <span class="class"><span class="keyword">struct</span> <span class="title">BinNode</span> &#123;</span> <span class="comment">//二叉树节点模板类</span></span><br><span class="line"><span class="comment">// 成员</span></span><br><span class="line">   T data; <span class="comment">//数值</span></span><br><span class="line">   BinNodePosi(T) parent; BinNodePosi(T) lc; BinNodePosi(T) rc; <span class="comment">//父节点及左、右孩子</span></span><br><span class="line">   <span class="keyword">int</span> height; <span class="comment">//高度（通用）</span></span><br><span class="line">   <span class="keyword">int</span> npl; <span class="comment">//Null Path Length（左式堆，也可直接用height代替）</span></span><br><span class="line">   RBColor color; <span class="comment">//颜色（红黑树）</span></span><br><span class="line"><span class="comment">// 构造函数</span></span><br><span class="line">   BinNode() :</span><br><span class="line">      parent ( <span class="literal">NULL</span> ), lc ( <span class="literal">NULL</span> ), rc ( <span class="literal">NULL</span> ), height ( <span class="number">0</span> ), npl ( <span class="number">1</span> ), color ( RB_RED ) &#123; &#125;</span><br><span class="line">   BinNode ( T e, BinNodePosi(T) p = <span class="literal">NULL</span>, BinNodePosi(T) lc = <span class="literal">NULL</span>, BinNodePosi(T) rc = <span class="literal">NULL</span>,</span><br><span class="line">             <span class="keyword">int</span> h = <span class="number">0</span>, <span class="keyword">int</span> l = <span class="number">1</span>, RBColor c = RB_RED ) :</span><br><span class="line">      data ( e ), parent ( p ), lc ( lc ), rc ( rc ), height ( h ), npl ( l ), color ( c ) &#123; &#125;</span><br><span class="line"><span class="comment">// 操作接口</span></span><br><span class="line">   <span class="function"><span class="keyword">int</span> <span class="title">size</span><span class="params">()</span></span>; <span class="comment">//统计当前节点后代总数，亦即以其为根的子树的规模</span></span><br><span class="line">   BinNodePosi(T) insertAsLC ( T <span class="keyword">const</span>&amp; ); <span class="comment">//作为当前节点的左孩子插入新节点</span></span><br><span class="line">   BinNodePosi(T) insertAsRC ( T <span class="keyword">const</span>&amp; ); <span class="comment">//作为当前节点的右孩子插入新节点</span></span><br><span class="line">   BinNodePosi(T) succ(); <span class="comment">//取当前节点的直接后继</span></span><br><span class="line">   <span class="keyword">template</span> &lt;<span class="keyword">typename</span> VST&gt; <span class="function"><span class="keyword">void</span> <span class="title">travLevel</span> <span class="params">( VST&amp; )</span></span>; <span class="comment">//子树层次遍历</span></span><br><span class="line">   <span class="keyword">template</span> &lt;<span class="keyword">typename</span> VST&gt; <span class="function"><span class="keyword">void</span> <span class="title">travPre</span> <span class="params">( VST&amp; )</span></span>; <span class="comment">//子树先序遍历</span></span><br><span class="line">   <span class="keyword">template</span> &lt;<span class="keyword">typename</span> VST&gt; <span class="function"><span class="keyword">void</span> <span class="title">travIn</span> <span class="params">( VST&amp; )</span></span>; <span class="comment">//子树中序遍历</span></span><br><span class="line">   <span class="keyword">template</span> &lt;<span class="keyword">typename</span> VST&gt; <span class="function"><span class="keyword">void</span> <span class="title">travPost</span> <span class="params">( VST&amp; )</span></span>; <span class="comment">//子树后序遍历</span></span><br><span class="line"><span class="comment">// 比较器、判等器</span></span><br><span class="line">   <span class="keyword">bool</span> <span class="keyword">operator</span>&lt; ( BinNode <span class="keyword">const</span>&amp; bn ) &#123; <span class="keyword">return</span> data &lt; bn.data; &#125; <span class="comment">//小于</span></span><br><span class="line">   <span class="keyword">bool</span> <span class="keyword">operator</span>== ( BinNode <span class="keyword">const</span>&amp; bn ) &#123; <span class="keyword">return</span> data == bn.data; &#125; <span class="comment">//等于</span></span><br><span class="line">   <span class="keyword">bool</span> <span class="keyword">operator</span>&gt; (BinNode <span class="keyword">const</span>&amp; bn)&#123; <span class="keyword">return</span> data &gt; bn.data;&#125; <span class="comment">//大于 </span></span><br><span class="line">   <span class="comment">/*DSA*/</span></span><br><span class="line">   <span class="comment">/*DSA*/</span>BinNodePosi(T) zig(); <span class="comment">//顺时针旋转</span></span><br><span class="line">   <span class="comment">/*DSA*/</span>BinNodePosi(T) zag(); <span class="comment">//逆时针旋转</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://haojohnsonlee.github.io/2018/06/01/算法-向量2/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Johnson Lee">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="昊江的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/06/01/算法-向量2/" itemprop="url">算法-向量-2</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-06-01T08:55:07+08:00">
                2018-06-01
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Words count in article</span>
                
                <span title="Words count in article">
                  1,399
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Reading time</span>
                
                <span title="Reading time">
                  8 mins
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h4 id="向量"><a href="#向量" class="headerlink" title="向量"></a>向量</h4><p>基于上次的基础，添加排序操作，便于实现有序向量进而执行二分查找等操作。</p>
<h4 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h4><h5 id="Vector-h"><a href="#Vector-h" class="headerlink" title="Vector.h"></a>Vector.h</h5><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">pragma</span> once</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;assert.h&gt;</span></span></span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">int</span> Rank;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> DEFAULT_CAPACITY 10 <span class="comment">// 初始向量容量</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Increase</span> &#123;</span> <span class="comment">//这是一个visit对象实例</span></span><br><span class="line">	<span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">operator</span><span class="params">()</span><span class="params">(T &amp; e)</span> </span>&#123; e++; &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">enum</span> SortMethod</span><br><span class="line">&#123;</span><br><span class="line">	bubbleSort,</span><br><span class="line">	selectionSort,</span><br><span class="line">	mergeSort,</span><br><span class="line">	heapSort,</span><br><span class="line">	quickSort</span><br><span class="line">	</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt; <span class="class"><span class="keyword">class</span> <span class="title">Vector</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">	Rank _size;</span><br><span class="line">	T* _items;</span><br><span class="line">	<span class="keyword">int</span> _capacity;</span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">copyFrom</span><span class="params">(T* items, <span class="keyword">int</span> lo, <span class="keyword">int</span> hi)</span></span>;</span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">expand</span><span class="params">()</span></span>;</span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">shrink</span><span class="params">()</span></span>;</span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">swap</span><span class="params">(Rank r1, Rank r2)</span></span>;</span><br><span class="line">	<span class="comment">// 低效版本</span></span><br><span class="line">	<span class="keyword">void</span> _bubbleSort_1(Rank lo, Rank hi);</span><br><span class="line"></span><br><span class="line">	<span class="keyword">void</span> _mergeSort(Rank lo, Rank hi);</span><br><span class="line">	<span class="keyword">void</span> _merge(Rank lo, Rank mi, Rank hi);</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	Vector(<span class="keyword">int</span> c = DEFAULT_CAPACITY);</span><br><span class="line">	Vector(T* items, <span class="keyword">int</span> lo, <span class="keyword">int</span> hi);</span><br><span class="line">	<span class="keyword">virtual</span> ~Vector();</span><br><span class="line"></span><br><span class="line">	<span class="comment">//只读接口</span></span><br><span class="line">	<span class="function"><span class="keyword">int</span> <span class="title">size</span><span class="params">()</span> <span class="keyword">const</span></span>;</span><br><span class="line">	<span class="function"><span class="keyword">int</span> <span class="title">get</span><span class="params">(Rank rank)</span></span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	<span class="comment">//可写接口</span></span><br><span class="line">	T &amp; <span class="keyword">operator</span>[] (Rank rank) <span class="keyword">const</span>;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">put</span><span class="params">(Rank rank, T e)</span></span>;</span><br><span class="line">	<span class="comment">//判断是否为空</span></span><br><span class="line">	<span class="function"><span class="keyword">bool</span> <span class="title">empty</span><span class="params">()</span> <span class="keyword">const</span></span>;</span><br><span class="line">	<span class="comment">//插入操作</span></span><br><span class="line">	<span class="function">Rank <span class="title">insert</span><span class="params">(Rank r, <span class="keyword">const</span> T&amp; e)</span></span>;</span><br><span class="line">	<span class="comment">//删除 位于lo 与 hi区间的元素 返回删除个数</span></span><br><span class="line">	<span class="function"><span class="keyword">int</span> <span class="title">remove</span><span class="params">(Rank lo, Rank hi)</span></span>;</span><br><span class="line">	<span class="comment">//删除 位于r 的元素 返回删除个数</span></span><br><span class="line">	<span class="function"><span class="keyword">int</span> <span class="title">remove</span><span class="params">(Rank r)</span></span>;</span><br><span class="line">	<span class="comment">//区间内查找</span></span><br><span class="line">	<span class="function">Rank <span class="title">find</span><span class="params">(<span class="keyword">const</span> T&amp; e, <span class="keyword">int</span> lo, <span class="keyword">int</span> hi)</span></span>;</span><br><span class="line">	<span class="comment">//剔除所有重复元素 O(n^2)</span></span><br><span class="line">	<span class="function"><span class="keyword">int</span> <span class="title">deduplicate</span><span class="params">()</span></span>;</span><br><span class="line">	<span class="comment">//遍历元素</span></span><br><span class="line">	void traverse(void(*visit)(T&amp; e));</span><br><span class="line">	<span class="keyword">template</span> &lt;<span class="keyword">typename</span> VST&gt;  <span class="function"><span class="keyword">void</span> <span class="title">traverse</span><span class="params">(VST&amp; vst)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//排序接口</span></span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">sort</span><span class="params">(SortMethod sort, Rank lo, Rank hi)</span></span>;</span><br><span class="line"></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h5 id="Vector-cpp"><a href="#Vector-cpp" class="headerlink" title="Vector.cpp"></a>Vector.cpp</h5><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"stdafx.h"</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"Vector.h"</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line">Vector&lt;T&gt;::Vector(<span class="keyword">int</span> c)</span><br><span class="line">&#123;</span><br><span class="line">	_items = <span class="keyword">new</span> T[_capacity = c];</span><br><span class="line">	_size = <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line">Vector&lt;T&gt;::Vector(T * items, <span class="keyword">int</span> lo, <span class="keyword">int</span> hi)</span><br><span class="line">&#123;</span><br><span class="line">	copyFrom(items, lo, hi);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line">Vector&lt;T&gt;::~Vector()</span><br><span class="line">&#123;</span><br><span class="line">	<span class="keyword">delete</span>[] _items;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="keyword">int</span> Vector&lt;T&gt;::size() <span class="keyword">const</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="keyword">return</span> _size;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="keyword">int</span> Vector&lt;T&gt;::get(Rank rank)</span><br><span class="line">&#123;</span><br><span class="line">	assert(rank &lt; _size &amp;&amp; rank &gt;= <span class="number">0</span>);</span><br><span class="line">	<span class="keyword">return</span> _items[rank];</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="keyword">void</span> Vector&lt;T&gt;::put(Rank rank, T e)</span><br><span class="line">&#123;</span><br><span class="line">	assert(rank &lt; _size &amp;&amp; rank &gt;= <span class="number">0</span>);</span><br><span class="line">	_items[rank] = e;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="keyword">bool</span> Vector&lt;T&gt;::empty() <span class="keyword">const</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="keyword">return</span> !_size;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line">Rank Vector&lt;T&gt;::insert(Rank r, <span class="keyword">const</span> T&amp; e)</span><br><span class="line">&#123;</span><br><span class="line">	expand();</span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = _size; i &gt; r; i--) </span><br><span class="line">		_items[i] = _items[i - <span class="number">1</span>];</span><br><span class="line">	_items[r] = e; _size++;</span><br><span class="line">	<span class="keyword">return</span> r;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="keyword">int</span> Vector&lt;T&gt;::remove(Rank lo, Rank hi)</span><br><span class="line">&#123;</span><br><span class="line">	<span class="keyword">if</span> (lo == hi) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">while</span> (hi &lt; _size) _items[lo++] = _items[hi++];</span><br><span class="line">	<span class="keyword">int</span> decrease = hi - lo;</span><br><span class="line">	_size = _size - decrease;</span><br><span class="line">	shrink();  <span class="comment">//非必须</span></span><br><span class="line">	<span class="keyword">return</span> decrease;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="keyword">int</span> Vector&lt;T&gt;::remove(Rank r)</span><br><span class="line">&#123;</span><br><span class="line">	<span class="keyword">return</span> remove(r, r + <span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line">Rank Vector&lt;T&gt;::find(<span class="keyword">const</span> T &amp; e, <span class="keyword">int</span> lo, <span class="keyword">int</span> hi)</span><br><span class="line">&#123;</span><br><span class="line">	<span class="keyword">while</span> (lo &lt; hi-- &amp;&amp; e != _items[hi]);</span><br><span class="line">	<span class="keyword">return</span> hi;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="keyword">int</span> Vector&lt;T&gt;::deduplicate()</span><br><span class="line">&#123;</span><br><span class="line">	<span class="keyword">int</span> oldSize = _size;</span><br><span class="line">	<span class="keyword">int</span> i = <span class="number">1</span>;</span><br><span class="line">	<span class="keyword">while</span> (i &lt; _size) &#123;</span><br><span class="line">		find(_items[i], <span class="number">0</span>, i) &lt; <span class="number">0</span> ? i++ : remove(i);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> oldSize - _size;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="keyword">void</span> Vector&lt;T&gt;::traverse(<span class="keyword">void</span>(*visit)(T &amp;e))</span><br><span class="line">&#123;</span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; _size; i++) visit(_items[i]);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="keyword">void</span> Vector&lt;T&gt;::sort(SortMethod sort,Rank lo, Rank hi)</span><br><span class="line">&#123;</span><br><span class="line">	assert(lo &lt; hi &amp;&amp; lo &gt;= <span class="number">0</span> &amp;&amp; hi &lt;= _size);</span><br><span class="line">	<span class="keyword">switch</span> (sort)</span><br><span class="line">	&#123;</span><br><span class="line">	<span class="keyword">case</span> bubbleSort:</span><br><span class="line">		_bubbleSort_1(lo, hi);</span><br><span class="line">		<span class="keyword">break</span>;</span><br><span class="line">	<span class="keyword">case</span> selectionSort:</span><br><span class="line">		<span class="keyword">break</span>;</span><br><span class="line">	<span class="keyword">case</span> mergeSort:</span><br><span class="line">		_mergeSort(lo, hi);</span><br><span class="line">		<span class="keyword">break</span>;</span><br><span class="line">	<span class="keyword">case</span> heapSort:</span><br><span class="line">		<span class="keyword">break</span>;</span><br><span class="line">	<span class="keyword">case</span> quickSort:</span><br><span class="line">		<span class="keyword">break</span>;</span><br><span class="line">	<span class="keyword">default</span>:</span><br><span class="line">		<span class="keyword">break</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> VST&gt;</span><br><span class="line"><span class="keyword">inline</span> <span class="keyword">void</span> Vector&lt;T&gt;::traverse(VST &amp; visit) <span class="comment">//VST 对象进行 "()"操作符重载，执行自定义复杂操作</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; _size; i++) visit(_items[i]);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line">T &amp; Vector&lt;T&gt;::<span class="keyword">operator</span>[](Rank rank) <span class="keyword">const</span></span><br><span class="line">&#123;</span><br><span class="line">	assert(<span class="number">0</span> &lt;= rank &amp;&amp; rank &lt; _size);</span><br><span class="line">	<span class="keyword">return</span> _items[rank];</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="keyword">void</span> Vector&lt;T&gt;::copyFrom(T * items, <span class="keyword">int</span> lo, <span class="keyword">int</span> hi)</span><br><span class="line">&#123;</span><br><span class="line">	assert(lo &lt; hi);</span><br><span class="line">	_items = <span class="keyword">new</span> T[_capacity = (hi - lo) &lt;&lt; <span class="number">1</span>];</span><br><span class="line">	_size = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">while</span> (lo&lt;hi)</span><br><span class="line">		_items[_size++] = items[lo++];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 每次插入前调用该函数</span></span><br><span class="line"><span class="comment"> * 确保不上溢</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="keyword">void</span> Vector&lt;T&gt;::expand()</span><br><span class="line">&#123;</span><br><span class="line">	<span class="keyword">if</span> (_size &lt; _capacity) <span class="keyword">return</span>;  <span class="comment">//不必扩容</span></span><br><span class="line">	<span class="keyword">if</span> (_capacity &lt; DEFAULT_CAPACITY) _capacity = DEFAULT_CAPACITY;   <span class="comment">//至少将最大容量扩展至默认值</span></span><br><span class="line">	<span class="comment">//开辟新数组并复制数组</span></span><br><span class="line">	T* oldElem = _items; _items = <span class="keyword">new</span> T[_capacity &lt;&lt; <span class="number">1</span>];</span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; _size; i++)</span><br><span class="line">		_items[i] = oldElem[i];</span><br><span class="line">	<span class="keyword">delete</span>[] oldElem;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* 每次删除前调用该函数</span></span><br><span class="line"><span class="comment">* 确保不下溢</span></span><br><span class="line"><span class="comment">* 保证一定的空间利用率</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="keyword">void</span> Vector&lt;T&gt;::shrink()</span><br><span class="line">&#123;</span><br><span class="line">	<span class="keyword">if</span> (_capacity &lt; DEFAULT_CAPACITY &lt;&lt; <span class="number">1</span>) <span class="keyword">return</span>; <span class="comment">//不至于最后大小小于默认值</span></span><br><span class="line">	<span class="keyword">if</span> (_size &lt;&lt; <span class="number">2</span> &gt; _capacity)  <span class="keyword">return</span>;</span><br><span class="line">	<span class="comment">// 当元素数量4倍小于最大容量时扩容</span></span><br><span class="line">	T* oldElem = _items; _items = <span class="keyword">new</span> T[_capacity &gt;&gt; <span class="number">1</span>];</span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; _size; i++)</span><br><span class="line">		_items[i] = oldElem[i];</span><br><span class="line">	<span class="keyword">delete</span>[] oldElem;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="keyword">void</span> Vector&lt;T&gt;::swap(Rank r1, Rank r2)</span><br><span class="line">&#123;</span><br><span class="line">	assert(r1 &gt;= <span class="number">0</span> &amp;&amp; r1 &lt;= _size &amp;&amp; r2 &gt;= <span class="number">0</span> &amp;&amp; r2 &lt;= _size);</span><br><span class="line">	_items[r1] = _items[r1] + _items[r2];</span><br><span class="line">	_items[r2] = _items[r1] - _items[r2];</span><br><span class="line">	_items[r1] = _items[r1] - _items[r2];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="keyword">void</span> Vector&lt;T&gt;::_bubbleSort_1(Rank lo, Rank hi)</span><br><span class="line">&#123;</span><br><span class="line">	assert(lo &lt; hi &amp;&amp; lo &gt;= <span class="number">0</span> &amp;&amp; hi &lt;= _size);</span><br><span class="line">	<span class="keyword">bool</span> isSorted = <span class="literal">false</span>;</span><br><span class="line">	<span class="keyword">int</span> _lo;</span><br><span class="line">	<span class="keyword">while</span> (lo&lt; hi)</span><br><span class="line">	&#123;</span><br><span class="line">		_lo = lo;</span><br><span class="line">		isSorted = <span class="literal">true</span>;</span><br><span class="line">		<span class="keyword">while</span> (++_lo &lt; hi) &#123;</span><br><span class="line">			<span class="keyword">if</span> (_items[_lo - <span class="number">1</span>] &gt; _items[_lo]) &#123;</span><br><span class="line">				isSorted = <span class="literal">false</span>;</span><br><span class="line">				swap(_lo - <span class="number">1</span>, _lo);</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		hi--;</span><br><span class="line">		<span class="keyword">if</span> (isSorted) <span class="keyword">break</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="keyword">void</span> Vector&lt;T&gt;::_mergeSort(Rank lo, Rank hi)</span><br><span class="line">&#123;</span><br><span class="line">	<span class="keyword">if</span> (hi - lo &lt; <span class="number">2</span>) <span class="keyword">return</span>; <span class="comment">//到达递归基</span></span><br><span class="line">	<span class="keyword">int</span> mi = (lo + hi) &gt;&gt; <span class="number">1</span>;</span><br><span class="line">	_mergeSort(lo, mi); _mergeSort(mi, hi);</span><br><span class="line">	_merge(lo, mi, hi);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="keyword">void</span> Vector&lt;T&gt;::_merge(Rank lo, Rank mi, Rank hi)</span><br><span class="line">&#123;</span><br><span class="line">	T* A = _items + lo; <span class="comment">// A为_items lo-hi元素</span></span><br><span class="line">	<span class="keyword">int</span> lb = mi - lo; T* B = <span class="keyword">new</span> T[lb]; <span class="comment">//开辟新空间存储 lo - mi 元素</span></span><br><span class="line">	<span class="keyword">for</span> (Rank i = <span class="number">0</span>; i &lt; lb; B[i] = _items[i++]) ; <span class="comment">// 复制元素</span></span><br><span class="line">	<span class="keyword">int</span> lc = hi - mi; T* C = _items + mi; <span class="comment">// C为 mi - hi元素</span></span><br><span class="line">	<span class="keyword">for</span> (Rank i = <span class="number">0</span>, j = <span class="number">0</span>, k = <span class="number">0</span>; (j &lt; lb) || (k &lt; lc)) &#123;</span><br><span class="line">		<span class="keyword">if</span> ((j &lt; lb) &amp;&amp; (!(k &lt; lc) || (B[j] &lt;= C[k])))A[i++] = B[j++];</span><br><span class="line">		<span class="keyword">if</span> ((k &lt; lc) &amp;&amp; (!(j &lt; lb) || (C[k] &lt; B[j]))) A[i++] = C[k++];</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">delete</span>[] B;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">visit</span><span class="params">(<span class="keyword">const</span> T &amp; e)</span> </span>&#123;</span><br><span class="line">	<span class="built_in">std</span>::<span class="built_in">printf</span>(<span class="string">"%d \n"</span>, e);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel sidebar-panel-active">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/images/avatar.jpg"
               alt="Johnson Lee" />
          <p class="site-author-name" itemprop="name">Johnson Lee</p>
           
              <p class="site-description motion-element" itemprop="description">以后将会在此发布一些生活的、技术的、学业的各种分享在这里，以期记录我的点点滴滴</p>
          
        </div>
        <nav class="site-state motion-element">

          
            <div class="site-state-item site-state-posts">
              <a href="/archives/">
                <span class="site-state-item-count">21</span>
                <span class="site-state-item-name">posts</span>
              </a>
            </div>
          

          

          
            
            
            <div class="site-state-item site-state-tags">
              
                <span class="site-state-item-count">9</span>
                <span class="site-state-item-name">tags</span>
              
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
        </div>

        
        

        
        

        


      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2018</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Johnson Lee</span>
</div>


<div class="powered-by">
  Powered by <a class="theme-link" href="https://hexo.io">Hexo</a>
</div>

<div class="theme-info">
  Theme -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Muse
  </a>
</div>


        

        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.2"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.2"></script>



  
  

  
    <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.2"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.2"></script>

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.2"></script>



  


  




	





  





  






  





  

  

  

  

  

  

</body>
</html>
